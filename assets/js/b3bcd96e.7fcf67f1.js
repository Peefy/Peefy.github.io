"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[79642],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>h});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,l=e.originalType,s=e.parentName,d=r(e,["components","mdxType","originalType","parentName"]),u=p(n),m=i,h=u["".concat(s,".").concat(m)]||u[m]||c[m]||l;return n?a.createElement(h,o(o({ref:t},d),{},{components:n})):a.createElement(h,o({ref:t},d))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var l=n.length,o=new Array(l);o[0]=m;var r={};for(var s in t)hasOwnProperty.call(t,s)&&(r[s]=t[s]);r.originalType=e,r[u]="string"==typeof e?e:i,o[1]=r;for(var p=2;p<l;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},4405:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>c,frontMatter:()=>l,metadata:()=>r,toc:()=>p});var a=n(87462),i=(n(67294),n(3905));const l={sidebar_position:2},o="KCL",r={unversionedId:"user_docs/support/faq-kcl",id:"version-0.5.5/user_docs/support/faq-kcl",title:"KCL",description:"1. How to write a simple key-value pair configuration with KCL",source:"@site/versioned_docs/version-0.5.5/user_docs/support/faq-kcl.md",sourceDirName:"user_docs/support",slug:"/user_docs/support/faq-kcl",permalink:"/docs/0.5.5/user_docs/support/faq-kcl",draft:!1,editUrl:"https://github.com/kcl-lang/kcl-lang.io/tree/main/versioned_docs/version-0.5.5/user_docs/support/faq-kcl.md",tags:[],version:"0.5.5",lastUpdatedBy:"peefy",lastUpdatedAt:1692772848,formattedLastUpdatedAt:"Aug 23, 2023",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"user_docs",previous:{title:"FAQ",permalink:"/docs/0.5.5/user_docs/support/"},next:{title:"YAML",permalink:"/docs/0.5.5/user_docs/support/faq-yaml"}},s={},p=[{value:"1. How to write a simple key-value pair configuration with KCL",id:"1-how-to-write-a-simple-key-value-pair-configuration-with-kcl",level:2},{value:"2. What are the basic data types in KCL?",id:"2-what-are-the-basic-data-types-in-kcl",level:2},{value:"3. What do some KCL variable names prefixed with <code>_</code> underscore mean? What&#39;s the difference between without the <code>_</code> underscore prefix? In what scenarios are they suitable for use?",id:"3-what-do-some-kcl-variable-names-prefixed-with-_-underscore-mean-whats-the-difference-between-without-the-_-underscore-prefix-in-what-scenarios-are-they-suitable-for-use",level:2},{value:"4. How to add elements to a dict?",id:"4-how-to-add-elements-to-a-dict",level:2},{value:"5. How to modify elements in dict?",id:"5-how-to-modify-elements-in-dict",level:2},{value:"6. How to add elements to list?",id:"6-how-to-add-elements-to-list",level:2},{value:"7. How to modify/delete elements in list?",id:"7-how-to-modifydelete-elements-in-list",level:2},{value:"8. How to write a for loop in KCL? How to understand and use list comprehension and dict comprehension?",id:"8-how-to-write-a-for-loop-in-kcl-how-to-understand-and-use-list-comprehension-and-dict-comprehension",level:2},{value:"9. How to write an if conditional statement?",id:"9-how-to-write-an-if-conditional-statement",level:2},{value:"10. How to express logical operations such as &quot;and&quot; &quot;or&quot; &quot;not&quot;?",id:"10-how-to-express-logical-operations-such-as-and-or-not",level:2},{value:"11. How to judge whether a variable is None/Undefined, and whether a string/dict/list is empty?",id:"11-how-to-judge-whether-a-variable-is-noneundefined-and-whether-a-stringdictlist-is-empty",level:2},{value:"12. How to concatenate strings, format strings, check string prefixes and suffixes and replace string content?",id:"12-how-to-concatenate-strings-format-strings-check-string-prefixes-and-suffixes-and-replace-string-content",level:2},{value:"13. What is the difference between using single and double quotes in a string?",id:"13-what-is-the-difference-between-using-single-and-double-quotes-in-a-string",level:2},{value:"14. How to write a long multiline string?",id:"14-how-to-write-a-long-multiline-string",level:2},{value:"15. How to use regular expressions in KCL?",id:"15-how-to-use-regular-expressions-in-kcl",level:2},{value:"16. What is the meaning of schema in KCL?",id:"16-what-is-the-meaning-of-schema-in-kcl",level:2},{value:"17. How to use schema?",id:"17-how-to-use-schema",level:2},{value:"18. How to add &quot;optional&quot; and &quot;required&quot; constraints to the schema attribute?",id:"18-how-to-add-optional-and-required-constraints-to-the-schema-attribute",level:2},{value:"19. How to write validation rules for attributes in schema?",id:"19-how-to-write-validation-rules-for-attributes-in-schema",level:2},{value:"20. How to add documentation to schema and its attributes?",id:"20-how-to-add-documentation-to-schema-and-its-attributes",level:2},{value:"21. How to write configuration based on schema? How to reuse the common configuration between multiple configurations?",id:"21-how-to-write-configuration-based-on-schema-how-to-reuse-the-common-configuration-between-multiple-configurations",level:2},{value:"22. How to override the default value of schema attribute when writing configuration based on schema?",id:"22-how-to-override-the-default-value-of-schema-attribute-when-writing-configuration-based-on-schema",level:2},{value:"23. How to reuse schema definitions?",id:"23-how-to-reuse-schema-definitions",level:2},{value:"24. How to reuse schema logic through composition?",id:"24-how-to-reuse-schema-logic-through-composition",level:2},{value:"25. How to import other KCL files?",id:"25-how-to-import-other-kcl-files",level:2},{value:"26. When can import be omitted?",id:"26-when-can-import-be-omitted",level:2},{value:"27. There is a line of code that is too long, how to wrap it gracefully with correct syntax?",id:"27-there-is-a-line-of-code-that-is-too-long-how-to-wrap-it-gracefully-with-correct-syntax",level:2},{value:"28. What do these symbols <code>**</code> and <code>*</code> mean?",id:"28-what-do-these-symbols--and--mean",level:2},{value:"29. How to get child elements of list/dict/schema",id:"29-how-to-get-child-elements-of-listdictschema",level:2},{value:"30. How to get the type of a variable in KCL code",id:"30-how-to-get-the-type-of-a-variable-in-kcl-code",level:2},{value:"31. How to solve the conflict between keywords and KCL variable names?",id:"31-how-to-solve-the-conflict-between-keywords-and-kcl-variable-names",level:2},{value:"32. Are built-in types of KCL a keyword of KCL? Whether they can be used for the definition of variables",id:"32-are-built-in-types-of-kcl-a-keyword-of-kcl-whether-they-can-be-used-for-the-definition-of-variables",level:2},{value:"33. How to implement enumeration in KCL?",id:"33-how-to-implement-enumeration-in-kcl",level:2},{value:"34. How to get the length of dict",id:"34-how-to-get-the-length-of-dict",level:2},{value:"35. How to write conditional configuration in KCL",id:"35-how-to-write-conditional-configuration-in-kcl",level:2},{value:"36. Does the == operator in KCL do deep comparisons?",id:"36-does-the--operator-in-kcl-do-deep-comparisons",level:2},{value:"37. How to modify existing configuration blocks in KCL",id:"37-how-to-modify-existing-configuration-blocks-in-kcl",level:2},{value:"Override attribute operator =",id:"override-attribute-operator-",level:3},{value:"Insert attribute operator +=",id:"insert-attribute-operator-",level:3},{value:"Merge attribute operators :",id:"merge-attribute-operators-",level:3},{value:"The solution to the conflicting values on the attribute &#39;attr&#39; between {value1} and {value2} error in KCL",id:"the-solution-to-the-conflicting-values-on-the-attribute-attr-between-value1-and-value2-error-in-kcl",level:3},{value:"38. How to traverse multiple elements at the same time in the for comprehension?",id:"38-how-to-traverse-multiple-elements-at-the-same-time-in-the-for-comprehension",level:2},{value:"39. How to set default value for option function in KCL",id:"39-how-to-set-default-value-for-option-function-in-kcl",level:2},{value:"40. How to check that multiple attributes cannot be empty or set values at the same time in schema in KCL?",id:"40-how-to-check-that-multiple-attributes-cannot-be-empty-or-set-values-at-the-same-time-in-schema-in-kcl",level:2},{value:"41. A file is imported in KCL, but the schema defined by other KCL files in the same directory cannot be found. What might be the reason?",id:"41-a-file-is-imported-in-kcl-but-the-schema-defined-by-other-kcl-files-in-the-same-directory-cannot-be-found-what-might-be-the-reason",level:2},{value:"42. How is indentation handled in KCL?",id:"42-how-is-indentation-handled-in-kcl",level:2},{value:"43. How to write simple tests for KCL code?",id:"43-how-to-write-simple-tests-for-kcl-code",level:2},{value:"44. How to define and use functions in KCL?",id:"44-how-to-define-and-use-functions-in-kcl",level:2},{value:"45. Why do we get an error when a variable is assigned an enumeration type (a literal union type)?",id:"45-why-do-we-get-an-error-when-a-variable-is-assigned-an-enumeration-type-a-literal-union-type",level:2},{value:"46. Procedural for loop",id:"46-procedural-for-loop",level:2},{value:"47. Default variables are immutable",id:"47-default-variables-are-immutable",level:2},{value:"48. Is there a type like Go <code>interface{}</code>/<code>any</code> or Java <code>Object</code> in KCL?",id:"48-is-there-a-type-like-go-interfaceany-or-java-object-in-kcl",level:2},{value:"49. How to develop a KCL plugin?",id:"49-how-to-develop-a-kcl-plugin",level:2},{value:"50. How to do basic type conversion in KCL",id:"50-how-to-do-basic-type-conversion-in-kcl",level:2}],d={toc:p},u="wrapper";function c(e){let{components:t,...n}=e;return(0,i.kt)(u,(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"kcl"},"KCL"),(0,i.kt)("h2",{id:"1-how-to-write-a-simple-key-value-pair-configuration-with-kcl"},"1. How to write a simple key-value pair configuration with KCL"),(0,i.kt)("p",null,"Create a file named ",(0,i.kt)("inlineCode",{parentName:"p"},"config.k")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'cpu = 256\nmemory = 512\nimage = "nginx:1.14.2"\nservice = "my-service"\n')),(0,i.kt)("p",null,"In the above KCL code, ",(0,i.kt)("inlineCode",{parentName:"p"},"cpu")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"memory")," are defined to be declared as integer types, and their values are ",(0,i.kt)("inlineCode",{parentName:"p"},"256")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"512"),", while ",(0,i.kt)("inlineCode",{parentName:"p"},"image")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"service")," are string types, their values are ",(0,i.kt)("inlineCode",{parentName:"p"},"image")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"service"),"."),(0,i.kt)("p",null,"Use the following command to compile the above KCL file into YAML for output"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"kcl config.k\n")),(0,i.kt)("p",null,"The output YAML is"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"cpu: 256\nmemory: 512\nimage: nginx:1.14.2\nservice: my-service\n")),(0,i.kt)("p",null,"If we want to output the YAML content to a file such as ",(0,i.kt)("inlineCode",{parentName:"p"},"config.yaml"),", we can add the ",(0,i.kt)("inlineCode",{parentName:"p"},"-o|--output")," CLI argument:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"kcl config.k -o config.yaml\n")),(0,i.kt)("h2",{id:"2-what-are-the-basic-data-types-in-kcl"},"2. What are the basic data types in KCL?"),(0,i.kt)("p",null,"KCL's current basic data types and values include:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Integer type ",(0,i.kt)("inlineCode",{parentName:"li"},"int"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Examples: decimal positive integer ",(0,i.kt)("inlineCode",{parentName:"li"},"1"),", decimal negative integer ",(0,i.kt)("inlineCode",{parentName:"li"},"-1"),", hexadecimal integer ",(0,i.kt)("inlineCode",{parentName:"li"},"0x10"),", octal integer ",(0,i.kt)("inlineCode",{parentName:"li"},"0o10"),", binary integer ",(0,i.kt)("inlineCode",{parentName:"li"},"0b10")))),(0,i.kt)("li",{parentName:"ul"},"float type ",(0,i.kt)("inlineCode",{parentName:"li"},"float"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Examples: positive float ",(0,i.kt)("inlineCode",{parentName:"li"},"1.10"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"1.0"),", negative float ",(0,i.kt)("inlineCode",{parentName:"li"},"-35.59"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"-90."),", scientific notation float ",(0,i.kt)("inlineCode",{parentName:"li"},"32.3e+18"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"70.2E-12")))),(0,i.kt)("li",{parentName:"ul"},"boolean type ",(0,i.kt)("inlineCode",{parentName:"li"},"bool"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Example: true value ",(0,i.kt)("inlineCode",{parentName:"li"},"True"),", false value ",(0,i.kt)("inlineCode",{parentName:"li"},"False")))),(0,i.kt)("li",{parentName:"ul"},"String type ",(0,i.kt)("inlineCode",{parentName:"li"},"str")," - marked with ",(0,i.kt)("inlineCode",{parentName:"li"},"'"),", ",(0,i.kt)("inlineCode",{parentName:"li"},'"'),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Example: double quoted string ",(0,i.kt)("inlineCode",{parentName:"li"},'"string"'),", ",(0,i.kt)("inlineCode",{parentName:"li"},'"""string"""'),", single quoted string ",(0,i.kt)("inlineCode",{parentName:"li"},"'string'"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"'''string'''")))),(0,i.kt)("li",{parentName:"ul"},"List type ",(0,i.kt)("inlineCode",{parentName:"li"},"list")," - marked with ",(0,i.kt)("inlineCode",{parentName:"li"},"["),", ",(0,i.kt)("inlineCode",{parentName:"li"},"]"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Example: empty list ",(0,i.kt)("inlineCode",{parentName:"li"},"[]"),", string list ",(0,i.kt)("inlineCode",{parentName:"li"},'["string1", "string2", "string3"]')))),(0,i.kt)("li",{parentName:"ul"},"Dictionary type ",(0,i.kt)("inlineCode",{parentName:"li"},"dict")," - marked with ",(0,i.kt)("inlineCode",{parentName:"li"},"{"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"}"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Example: empty dictionary ",(0,i.kt)("inlineCode",{parentName:"li"},"{}"),", dictionary whose keys and values \u200b\u200bare all strings ",(0,i.kt)("inlineCode",{parentName:"li"},'{"key1": "value1", "key2": "value2"}')))),(0,i.kt)("li",{parentName:"ul"},"Structure type ",(0,i.kt)("inlineCode",{parentName:"li"},"schema")," - defined with the keyword ",(0,i.kt)("inlineCode",{parentName:"li"},"schema")),(0,i.kt)("li",{parentName:"ul"},"Null value type ",(0,i.kt)("inlineCode",{parentName:"li"},"None")," - used to indicate that the value of a variable is null, corresponding to the ",(0,i.kt)("inlineCode",{parentName:"li"},"null")," value of the output YAML"),(0,i.kt)("li",{parentName:"ul"},"Undefined value type ",(0,i.kt)("inlineCode",{parentName:"li"},"Undefined")," - used to indicate that a variable has not been assigned a value, and a variable with a value of ",(0,i.kt)("inlineCode",{parentName:"li"},"Undefined")," will not be output to YAML")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'schema Person:\n    name: str\n    age: int\n\nalice = Person {\n    name = "Alice"\n    age = 18\n}\nbob = Person {\n    name = "Bob"\n    age = 10\n}\n')),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Note: All KCL variables can be assigned the null value ",(0,i.kt)("inlineCode",{parentName:"p"},"None")," and the undefined value ",(0,i.kt)("inlineCode",{parentName:"p"},"Undefined"),".")),(0,i.kt)("h2",{id:"3-what-do-some-kcl-variable-names-prefixed-with-_-underscore-mean-whats-the-difference-between-without-the-_-underscore-prefix-in-what-scenarios-are-they-suitable-for-use"},"3. What do some KCL variable names prefixed with ",(0,i.kt)("inlineCode",{parentName:"h2"},"_")," underscore mean? What's the difference between without the ",(0,i.kt)("inlineCode",{parentName:"h2"},"_")," underscore prefix? In what scenarios are they suitable for use?"),(0,i.kt)("p",null,"A variable with an underscore prefix in KCL represents a ",(0,i.kt)("strong",{parentName:"p"},"hidden"),", ",(0,i.kt)("strong",{parentName:"p"},"mutable")," variable, ",(0,i.kt)("strong",{parentName:"p"},"hidden")," means a variable with an underscore prefix will not be output to YAML, and ",(0,i.kt)("strong",{parentName:"p"},"mutable")," means that a variable with an underscore prefix can be repeatedly assigned multiple times, and a variable without an underscore prefix is immutable after being assigned."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"name = 'Foo'  # Exported and immutable variable\nname = 'Bar'  # Error: An exported variable can only be assigned a value once\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"_name = 'Foo'  # Hidden and mutable variable\n_name = 'Bar'\n\nschema Person:\n    _name: str  # hidden and mutable\n")),(0,i.kt)("h2",{id:"4-how-to-add-elements-to-a-dict"},"4. How to add elements to a dict?"),(0,i.kt)("p",null,"We can use the union operator ",(0,i.kt)("inlineCode",{parentName:"p"},"|")," or the dict unpacking operator ",(0,i.kt)("inlineCode",{parentName:"p"},"**")," to add elements into a dict, and we can use ",(0,i.kt)("inlineCode",{parentName:"p"},"in")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"not in")," operators to determine whether the dict variable contains a certain key."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'_left = {key: {key1 = "value1"}, intKey = 1}  # Note: `=` denotes override the value.\n_right = {key: {key2 = "value2"}, intKey = 2}\ndataUnion = _left | _right  # {"key": {"key1": "value1", "key2": "value2"}, "intKey": 2}\ndataUnpack = {**_left, **_right}  # {"key": {"key1": "value1", "key2": "value2"}, "intKey": 2}\n')),(0,i.kt)("p",null,"The output YAML is"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"dataUnion:\n  key:\n    key1: value1\n    key2: value2\n  intKey: 2\ndataUnpack:\n  key:\n    key1: value1\n    key2: value2\n  intKey: 2\n")),(0,i.kt)("p",null,"It is also possible to add key-value pair to a dict using the ",(0,i.kt)("inlineCode",{parentName:"p"},"string interpolation")," or the string ",(0,i.kt)("inlineCode",{parentName:"p"},"format")," method."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'dictKey1 = "key1"\ndictKey2 = "key2"\ndata = {\n    "${dictKey1}" = "value1"\n    "{}".format(dictKey2) = "value2"\n}\n')),(0,i.kt)("p",null,"The output YAML is"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"dictKey1: key1\ndictKey2: key2\ndata:\n  key1: value1\n  key2: value2\n")),(0,i.kt)("h2",{id:"5-how-to-modify-elements-in-dict"},"5. How to modify elements in dict?"),(0,i.kt)("p",null,"We can use the union operator ",(0,i.kt)("inlineCode",{parentName:"p"},"|"),", or the unpacking operator ",(0,i.kt)("inlineCode",{parentName:"p"},"**")," to modify the elements in the dict"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'_data = {key = "value"}  # {"key": "value"}\n_data = _data | {key = "override_value1"}  # {"key": "override_value1"}\n_data = {**_data, **{key = "override_value2"}}  # {"key": "override_value2"}\n')),(0,i.kt)("p",null,"If we want to delete a value with a key of ",(0,i.kt)("inlineCode",{parentName:"p"},"key")," in the dict, we can use the unpacking operator ",(0,i.kt)("inlineCode",{parentName:"p"},"**{key = Undefined}")," or the merge operator ",(0,i.kt)("inlineCode",{parentName:"p"},"| {key = Undefined}")," to overwrite, the value of the key is Undefined after overwriting, and no YAML output will be done."),(0,i.kt)("h2",{id:"6-how-to-add-elements-to-list"},"6. How to add elements to list?"),(0,i.kt)("p",null,"There are two ways to add elements to a list:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Use ",(0,i.kt)("inlineCode",{parentName:"li"},"+"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"+=")," and slice to concatenate list variables to add elements to the list")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'_args = ["a", "b", "c"]\n_args += ["end"]  # Add elements "end" to the end of the list: ["a", "b", "c", "end"]\n_args = _args[:2] + ["x"] + _args[2:]  # Insert element "x" at list index 2:  ["a", "b", "x", "c", "end"]\n_args = ["start"] + _args  # Add elements "start" to the head of the list: ["start", "a", "b", "x", "c", "end"]\n')),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Use the ",(0,i.kt)("inlineCode",{parentName:"li"},"*")," unpacking operator to concatenate and merge lists")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'_args = ["a", "b", "c"]\n_args = [*_args, "end"]  # Add elements "end" to the end of the list: ["a", "b", "c", "end"]\n_args = ["start", *_args]  # Add elements "start" to the head of the list: ["start", "a", "b", "x", "c", "end"]\n')),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Note: When the consecutive variables are ",(0,i.kt)("inlineCode",{parentName:"p"},"None/Undefined"),", using ",(0,i.kt)("inlineCode",{parentName:"p"},"+")," may cause an error, then we can use the list unpacking operator ",(0,i.kt)("inlineCode",{parentName:"p"},"*")," or use the ",(0,i.kt)("inlineCode",{parentName:"p"},"or")," operator to take the default value of the list to avoid null values judge.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'data1 = [1, 2, 3]\ndata2 = None\ndata3 = [*data1, *data2]  # Ok: [1, 2, 3]\ndata4 = data1 + data2 or []  # OK: [1, 2, 3], We can use the `or` operator to take the default value of data2 as [], when data2 is None/Undefined, take the empty list [] for calculation.\ndata5 = data1 + data2  # Error: can only concatenate list (not "NoneType") to list\n')),(0,i.kt)("h2",{id:"7-how-to-modifydelete-elements-in-list"},"7. How to modify/delete elements in list?"),(0,i.kt)("p",null,"There are two ways to modify the elements in the list:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Use slice to directly modify the value at an index of a list")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'_index = 1\n_args = ["a", "b", "c"]\n_args = _args[:index] + ["x"] + _args[index+1:]  # Modify the element of list index 1 to "x": ["a", "x", "c"]\n')),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Use the list comprehension to modify elements in a list")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'_args = ["a", "b", "c"]\n_args = ["x" if a == "b" else a for a in _args]  # Change the value of "b" in the list to "x": ["a", "x", "c"]\n')),(0,i.kt)("p",null,"There are two ways to delete elements in a list:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Use the list comprehension to delete elements with the ",(0,i.kt)("inlineCode",{parentName:"li"},"if")," condition expressions."),(0,i.kt)("li",{parentName:"ul"},"Use ",(0,i.kt)("inlineCode",{parentName:"li"},"filter")," expression to filter elements.")),(0,i.kt)("p",null,"For example, if we want to delete a number greater than 2 in a list ",(0,i.kt)("inlineCode",{parentName:"p"},"[1, 2, 3, 4, 5]"),", we can write as follows:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"originList = [1, 2, 3, 4, 5]\noneWayDeleteListItem = [item for item in originList if item <= 2]\nanotherWayDeleteListItem = filter item in originList {\n    item <= 2\n}\n")),(0,i.kt)("p",null,"The output YAML is"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"originList:\n- 1\n- 2\n- 3\n- 4\n- 5\noneWayDeleteListItem:\n- 1\n- 2\nanotherWayDeleteListItem:\n- 1\n- 2\n")),(0,i.kt)("h2",{id:"8-how-to-write-a-for-loop-in-kcl-how-to-understand-and-use-list-comprehension-and-dict-comprehension"},"8. How to write a for loop in KCL? How to understand and use list comprehension and dict comprehension?"),(0,i.kt)("p",null,"KCL currently only supports functional/declarative deductive for loops. We can traverse dict and list variables as follows:"),(0,i.kt)("p",null,"The specific form of a list comprehension is (where ",(0,i.kt)("inlineCode",{parentName:"p"},"[]")," are used on both sides of the comprehension):"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-txt"},"[expression for expr in sequence1\n            if condition1\n            for expr2 in sequence2\n            if condition2\n            for expr3 in sequence3 ...\n            if condition3\n            for exprN in sequenceN\n            if conditionN]\n")),(0,i.kt)("p",null,"The specific form of dict comprehension is (where ",(0,i.kt)("inlineCode",{parentName:"p"},"{}")," are used on both sides of the comprehension):"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-txt"},"{expression for expr in sequence1\n            if condition1\n            for expr2 in sequence2\n            if condition2\n            for expr3 in sequence3 ...\n            if condition3\n            for exprN in sequenceN\n            if conditionN}\n")),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"if")," in the above forms represents the filter condition, and the expression ",(0,i.kt)("inlineCode",{parentName:"p"},"expr")," that satisfies the condition will be generated into a new list or dict"),(0,i.kt)("p",null,"List comprehension example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"_listData = [1, 2, 3, 4, 5, 6]\n_listData = [l * 2 for l in _listData]  # All elements in _listData are multiplied by 2: [2, 4, 6, 8, 10, 12]\n_listData = [l for l in _listData if l % 4 == 0]  # Filter out all elements in _listData that are divisible by 4: [4, 8, 12]\n_listData = [l + 100 if l % 8 == 0 else l for l in _listData]  # Traverse _listData, when the element in it is divisible by 8, add 100 to the element, otherwise keep it unchanged: [4, 108, 12]\n")),(0,i.kt)("p",null,"Note the difference between the two ",(0,i.kt)("inlineCode",{parentName:"p"},"if"),"s on lines 3 and 4 in the above code:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The first ",(0,i.kt)("inlineCode",{parentName:"li"},"if")," represents the filter condition of the variable ",(0,i.kt)("inlineCode",{parentName:"li"},"_listData")," list comprehension itself, and cannot be followed by ",(0,i.kt)("inlineCode",{parentName:"li"},"else"),". Elements that meet the conditions will be added to the list, and elements that do not meet the conditions will be removed. Besides, the process may change the length of the list."),(0,i.kt)("li",{parentName:"ul"},"The second ",(0,i.kt)("inlineCode",{parentName:"li"},"if")," represents the selection condition of the list iteration variable ",(0,i.kt)("inlineCode",{parentName:"li"},"l"),", which means the ",(0,i.kt)("inlineCode",{parentName:"li"},"if-else")," ternary expression, which must be followed by ",(0,i.kt)("inlineCode",{parentName:"li"},"else"),", regardless of whether the condition is met, the resulting element is still in the list, the length of the list does not change.")),(0,i.kt)("p",null,"Dict comprehension example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'_dictData = {key1 = "value1", key2 = "value2"}\n_dictData = {k = _dictData[k] for k in _dictData if k == "key1" and _dictData[k] == "value1"}  # Filter out the elements whose key is "key1" and value is "value1" in _dictData, {"key1": "value1"}\n')),(0,i.kt)("p",null,"Use comprehension to get all keys of dict:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'dictData = {key1 = "value1", key2 = "value2"}\ndictDataKeys = [k for k in _dictData]  # ["key1", "key2"]\n')),(0,i.kt)("p",null,"Use comprehension to sort a dict in ascending order by key:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"dictData = {key3 = \"value3\", key2 = \"value2\", key1 = \"value1\"}  # {'key3': 'value3', 'key2': 'value2', 'key1': 'value1'}\ndictSortedData = {k = dictData[k] for k in sorted(dictData)}  # {'key1': 'value1', 'key2': 'value2', 'key3': 'value3'}\n")),(0,i.kt)("p",null,"Multi-level comprehension example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"array1 = [1, 2, 3]\narray2 = [4, 5, 6]\ndata = [a1 + a2 for a1 in array1 for a2 in array2]  # [5, 6, 7, 6, 7, 8, 7, 8, 9] len(data) == len(array1) * len(array2)\n")),(0,i.kt)("p",null,"Double variable loop (list comprehension supports index iteration of list and value iteration of dict, which can simplify the code writing of list/dict iteration process):"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"list")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"data = [1000, 2000, 3000]\n# Single variable loop\ndataLoop1 = [i * 2 for i in data]  # [2000, 4000, 6000]\ndataLoop2 = [i for i in data if i == 2000]  # [2000]\ndataLoop3 = [i if i > 2 else i + 1 for i in data]  # [1000, 2000, 3000]\n# Double variable loop\ndataLoop4 = [i + v for i, v in data]  # [1000, 2001, 3002]\ndataLoop5 = [v for i, v in data if v == 2000]  # [2000]\n# Use _ to ignore loop variables\ndataLoop6 = [v if v > 2000 else v + i for i, v in data]  # [1000, 2001, 3000]\ndataLoop7 = [i for i, _ in data]  # [0, 1, 2]\ndataLoop8 = [v for _, v in data if v == 2000]  # [2000]\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"dict")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'data = {key1 = "value1", key2 = "value2"}\n# Single variable loop\ndataKeys1 = [k for k in data]  # ["key1", "key2"]\ndataValues1 = [data[k] for k in data]  # ["value1", "value2"]\n# Double variable loop\ndataKeys2 = [k for k, v in data]  # ["key1", "key2"]\ndataValues2 = [v for k, v in data]  # ["value1", "value2"]\ndataFilter = {k = v for k, v in data if k == "key1" and v == "value1"}  # {"key1": "value1"}\n# Use _ to ignore loop variables\ndataKeys3 = [k for k, _ in data]  # ["key1", "key2"]\ndataValues3 = [v for _, v in data]  # ["value1", "value2"]\n')),(0,i.kt)("h2",{id:"9-how-to-write-an-if-conditional-statement"},"9. How to write an if conditional statement?"),(0,i.kt)("p",null,"KCL supports two ways to write if conditional statements:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"if-elif-else block statement, where both elif and else blocks can be omitted, and the elif block can be used multiple times")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'success = True\n_result = "failed"\nif success:\n    _result = "success"\n')),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'success = True\nif success:\n    _result = "success"\nelse:\n    _result = "failed"\n')),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'_result = 0\nif condition == "one":\n    _result = 1\nelif condition == "two":\n    _result = 2\nelif condition == "three":\n    _result = 3\nelse:\n    _result = 4\n')),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Conditional expression ",(0,i.kt)("inlineCode",{parentName:"li"},"<expr1> if <condition> else <expr2>"),", similar to ",(0,i.kt)("inlineCode",{parentName:"li"},"<condition> ? <expr1> : <expr2>")," ternary expression in C language")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'success = True\n_result = "success" if success else "failed"\n')),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Note: When writing an if-elif-else block statement, pay attention to the colon ",(0,i.kt)("inlineCode",{parentName:"p"},":")," after the if condition and keep the indentation consistent.")),(0,i.kt)("p",null,"In addition, conditional expressions can also be written directly in a list or dict (the difference is that the value to be written in the if expression written in the structure is not a statement):"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"list")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'env = "prod"\ndata = [\n    "env_value"\n    ":"\n    if env == "prod":\n        "prod"  # Write values that need to be added to data, not statements\n    else:\n        "other_prod"\n]  # ["env_value", ":", "prod"]\n')),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"dict")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'env = "prod"\nconfig = {\n    if env == "prod":\n        MY_PROD_ENV = "prod_value"  # Write key-value pairs that need to be added to config, not statements\n    else:\n        OTHER_ENV = "other_value"\n}  # {"MY_PROD_ENV": "prod_value"}\n')),(0,i.kt)("h2",{id:"10-how-to-express-logical-operations-such-as-and-or-not"},'10. How to express logical operations such as "and" "or" "not"?'),(0,i.kt)("p",null,"In KCL, use ",(0,i.kt)("inlineCode",{parentName:"p"},"and"),' for "logical and", use ',(0,i.kt)("inlineCode",{parentName:"p"},"or"),' for "logical or", use ',(0,i.kt)("inlineCode",{parentName:"p"},"not"),' for "not", which is similar to  ',(0,i.kt)("inlineCode",{parentName:"p"},"&&"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"||")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"~")," semantic in C language."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"done = True\ncol == 0\nif done and (col == 0 or col == 3):\n    ok = 1\n")),(0,i.kt)("p",null,'For "bitwise AND", "bitwise OR" and "bitwise XOR" of integers, we can use ',(0,i.kt)("inlineCode",{parentName:"p"},"&"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"|")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"^")," operators in KCL, which is similar to  ",(0,i.kt)("inlineCode",{parentName:"p"},"&"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"|")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"^")," semantic in C language."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"value = 0x22\nbitmask = 0x0f\n\nassert (value & bitmask) == 0x02\nassert (value & ~bitmask) == 0x20\nassert (value | bitmask) == 0x2f\nassert (value ^ bitmask) == 0x2d\n")),(0,i.kt)("p",null,"When we need to write a pattern such as ",(0,i.kt)("inlineCode",{parentName:"p"},"A if A else B"),", we can use ",(0,i.kt)("inlineCode",{parentName:"p"},"A or B")," to simplify, such as the following code:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"value = [0]\ndefault = [1]\nx0 = value if value else default\nx1 = value or default  # Use `value or default` instead of `value if value else default`\n")),(0,i.kt)("h2",{id:"11-how-to-judge-whether-a-variable-is-noneundefined-and-whether-a-stringdictlist-is-empty"},"11. How to judge whether a variable is None/Undefined, and whether a string/dict/list is empty?"),(0,i.kt)("p",null,"Please note that ",(0,i.kt)("inlineCode",{parentName:"p"},"False"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"None"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"Undefined"),", number ",(0,i.kt)("inlineCode",{parentName:"p"},"0"),", empty list ",(0,i.kt)("inlineCode",{parentName:"p"},"[]"),", empty dictionary ",(0,i.kt)("inlineCode",{parentName:"p"},"{}")," and empty string ",(0,i.kt)("inlineCode",{parentName:"p"},'""'),", ",(0,i.kt)("inlineCode",{parentName:"p"},"''"),", ",(0,i.kt)("inlineCode",{parentName:"p"},'""""""'),", ",(0,i.kt)("inlineCode",{parentName:"p"},"''''''")," in the conditional expression,  are all treated as ",(0,i.kt)("inlineCode",{parentName:"p"},"false")," expressions."),(0,i.kt)("p",null,"For example, when judging a string variable ",(0,i.kt)("inlineCode",{parentName:"p"},"strData")," is neither ",(0,i.kt)("inlineCode",{parentName:"p"},"None/Undefined")," nor an empty string (string length is greater than 0), we can simply use the following expression:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'strData = "value"\nif strData:\n    isEmptyStr = False\n')),(0,i.kt)("p",null,"Empty dictionary and empty list judgment examples:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"_emptyList = []\n_emptyDict = {}\nisEmptyList = False if _emptyList else True\nisEmptyDict = False if _emptyDict else True\n")),(0,i.kt)("p",null,"The output YAML is"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"isEmptyList: true\nisEmptyDict: true\n")),(0,i.kt)("p",null,"Or use the boolean function ",(0,i.kt)("inlineCode",{parentName:"p"},"bool")," to judge"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"_emptyList = []\n_emptyDict = {}\nisEmptyList = bool(_emptyList)\nisEmptyDict = bool(_emptyDict)\n")),(0,i.kt)("h2",{id:"12-how-to-concatenate-strings-format-strings-check-string-prefixes-and-suffixes-and-replace-string-content"},"12. How to concatenate strings, format strings, check string prefixes and suffixes and replace string content?"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The ",(0,i.kt)("inlineCode",{parentName:"li"},"+")," operator can be used to concatenate two strings in KCL")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'data1 = "string1" + "string2"  # "string1string2"\ndata2 = "string1" + " " + "string2"  # "string1 string2"\n')),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"There are currently two ways to format strings in KCL:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"format")," method for string variables ",(0,i.kt)("inlineCode",{parentName:"li"},'"{}".format()')),(0,i.kt)("li",{parentName:"ul"},"Using string interpolation ",(0,i.kt)("inlineCode",{parentName:"li"},"${}"))))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'hello = "hello"\na = "{} world".format(hello)\nb = "${hello} world"\n')),(0,i.kt)("p",null,"Note that if we want to use the ",(0,i.kt)("inlineCode",{parentName:"p"},"{")," character or ",(0,i.kt)("inlineCode",{parentName:"p"},"}")," alone in ",(0,i.kt)("inlineCode",{parentName:"p"},'"{}".format()'),", we need to use ",(0,i.kt)("inlineCode",{parentName:"p"},"{{")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"}}")," to convert ",(0,i.kt)("inlineCode",{parentName:"p"},"{")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"}")," respectively, such as escaping a JSON string as follows:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'data = "value"\njsonData = \'{{"key": "{}"}}\'.format(data)\n')),(0,i.kt)("p",null,"The output YAML is"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},'data: value\njsonData: \'{"key": "value"}\'\n')),(0,i.kt)("p",null,"Note that if we want to use the ",(0,i.kt)("inlineCode",{parentName:"p"},"$")," character alone in the ",(0,i.kt)("inlineCode",{parentName:"p"},"${}")," interpolated string, we need to escape the ",(0,i.kt)("inlineCode",{parentName:"p"},"$")," with ",(0,i.kt)("inlineCode",{parentName:"p"},"$$")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'world = "world"\na = "hello {}".format(world)       # "hello world"\nb = "hello ${world}"               # "hello world"\nc = "$$hello ${world}$$"           # "$hello world$"\nc2 = "$" + "hello ${world}" + "$"  # "$hello world$"\n')),(0,i.kt)("p",null,"The output YAML is"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"world: world\na: hello world\nb: hello world\nc: $hello world$\nc2: $hello world$\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Use the ",(0,i.kt)("inlineCode",{parentName:"li"},"startswith")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"endswith")," methods of strings in KCL to check the prefix and suffix of strings")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'data = "length"\nisEndsWith = data.endswith("th")  # True\nisStartsWith = "length".startswith(\'len\')  # True\n')),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Use the replace method of the string or the ",(0,i.kt)("inlineCode",{parentName:"li"},"regex.replace")," function to replace the content of the string in KCL")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'import regex\ndata1 = "length".replace("len", "xxx")  # Replace "len", "xxxgth" with "xxx"\ndata2 = regex.replace("abc123", r"\\D", "0")  # Replace all non-digits in "abc123" with "0", "000123"\n')),(0,i.kt)("p",null,"Among them, ",(0,i.kt)("inlineCode",{parentName:"p"},'r"\\D"')," means that we do not need to use ",(0,i.kt)("inlineCode",{parentName:"p"},"\\\\")," to escape the backslash ",(0,i.kt)("inlineCode",{parentName:"p"},"\\")," in ",(0,i.kt)("inlineCode",{parentName:"p"},"\\D"),", which is mostly used in regular expression strings."),(0,i.kt)("p",null,"Besides, we can use index placeholders or keyword placeholders in string formatting expressions to format multiple strings"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Index placeholders")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"x = '{2} {1} {0}'.format('directions', 'the', 'Read')\ny = '{0} {0} {0}'.format('string')\n")),(0,i.kt)("p",null,"The output YAML is"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"x: Read the directions\ny: string string string\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Keyword placeholders")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"x = 'a: {a}, b: {b}, c: {c}'.format(a = 1, b = 'Two', c = 12.3)\n")),(0,i.kt)("p",null,"The output YAML is"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"x: 'a: 1, b: Two, c: 12.3'\n")),(0,i.kt)("h2",{id:"13-what-is-the-difference-between-using-single-and-double-quotes-in-a-string"},"13. What is the difference between using single and double quotes in a string?"),(0,i.kt)("p",null,"There is little difference between KCL single-quoted and double-quoted strings. The only difference is that we don't need to use ",(0,i.kt)("inlineCode",{parentName:"p"},'\\"')," to escape ",(0,i.kt)("inlineCode",{parentName:"p"},'"')," in single-quoted strings, and we don't need to use ",(0,i.kt)("inlineCode",{parentName:"p"},"\\'")," to escape ",(0,i.kt)("inlineCode",{parentName:"p"},"'")," in double-quoted strings."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"singleQuotedString = 'This is my book named \"foo\"'  # Don\u2019t need to escape double quotes in single quoted strings.\ndoubleQuotedString = \"This is my book named 'foo'\"  # Don\u2019t need to escape single quotes in double quoted strings.\n")),(0,i.kt)("p",null,"In addition,  a long string consisting of three single quotes or three double quotes does not need to be escaped (except for the beginning and end of the string), such as the following example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"longStrWithQuote0 = \"\"\"Double quotes in long strings \"(not at the beginning and end)\"\"\"\nlongStrWithQuote1 = '''Double quotes in long strings \"(not at the beginning and end)'''\nlongStrWithQuote2 = \"\"\"Single quotes in long strings '(not at the beginning and end)\"\"\"\nlongStrWithQuote3 = '''Single quotes in long strings '(not at the beginning and end)'''\n")),(0,i.kt)("p",null,"The output YAML is"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"longStrWithQuote0: Double quotes in long strings \"(not at the beginning and end)\nlongStrWithQuote1: Double quotes in long strings \"(not at the beginning and end)\nlongStrWithQuote2: Single quotes in long strings '(not at the beginning and end)\nlongStrWithQuote3: Single quotes in long strings '(not at the beginning and end)\n")),(0,i.kt)("h2",{id:"14-how-to-write-a-long-multiline-string"},"14. How to write a long multiline string?"),(0,i.kt)("p",null,"In KCL, we can use a single-quoted string and newline characters ",(0,i.kt)("inlineCode",{parentName:"p"},"\\n")," or a triple-quoted string to write a multi-line string, and we can use the continuation character ",(0,i.kt)("inlineCode",{parentName:"p"},"\\")," to optimize the form of the KCL string. For example, for the three multi-line string variables in the following code, their values are the same:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'string1 = "The first line\\nThe second line\\nThe third line\\n"\nstring2 = """The first line\nThe second line\nThe third line\n"""\nstring3 = """\\\nThe first line\nThe second line\nThe third line\n"""  # It is recommended to use the long string writing form of `string3`.\n')),(0,i.kt)("p",null,"The output YAML is"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"string1: |\n  The first line\n  The second line\n  The third line\nstring2: |\n  The first line\n  The second line\n  The third line\nstring3: |\n  The first line\n  The second line\n  The third line\n")),(0,i.kt)("h2",{id:"15-how-to-use-regular-expressions-in-kcl"},"15. How to use regular expressions in KCL?"),(0,i.kt)("p",null,"Regular expressions can be used by importing the regular expression system module ",(0,i.kt)("inlineCode",{parentName:"p"},"import regex")," in KCL, which includes the following functions:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"match"),": Regular expression matching function, which matches the input string according to the regular expression, and returns a bool type to indicate whether the match is successful."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"split"),": Regular expression split function, which splits the string according to the regular expression, and returns a list of split strings."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"replace"),": Regular expression replacement function, which replaces all substrings in the string that satisfies the regular expression, and returns the replaced string."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"compile"),": Regular expression compilation function, which returns bool type to indicate whether it is a valid regular expression."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"search"),": Regular expression search function, which searches all substrings that satisfy the regular expression, and returns a list of substrings.")),(0,i.kt)("p",null,"Examples:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'import regex\n\nregex_source = "Apple,Google,Baidu,Xiaomi"\nregex_split = regex.split(regex_source, ",")\nregex_replace = regex.replace(regex_source, ",", "|")\nregex_compile = regex.compile("$^")\nregex_search = regex.search("aaaa", "a")\nregex_find_all = regex.findall("aaaa", "a")\nregex_result = regex.match("192.168.0.1", "^(1\\\\d{2}|2[0-4]\\\\d|25[0-5]|[1-9]\\\\d|[1-9])\\\\."+"(1\\\\d{2}|2[0-4]\\\\d|25[0-5]|[1-9]\\\\d|\\\\d)\\\\."+"(1\\\\d{2}|2[0-4]\\\\d|25[0-5]|[1-9]\\\\d|\\\\d)\\\\."+"(1\\\\d{2}|2[0-4]\\\\d|25[0-5]|[1-9]\\\\d|\\\\d)$")  # Determine if it is an IP string\nregex_result_false = regex.match("192.168.0,1", "^(1\\\\d{2}|2[0-4]\\\\d|25[0-5]|[1-9]\\\\d|[1-9])\\\\."+"(1\\\\d{2}|2[0-4]\\\\d|25[0-5]|[1-9]\\\\d|\\\\d)\\\\."+"(1\\\\d{2}|2[0-4]\\\\d|25[0-5]|[1-9]\\\\d|\\\\d)\\\\."+"(1\\\\d{2}|2[0-4]\\\\d|25[0-5]|[1-9]\\\\d|\\\\d)$")  # Determine if it is an IP string\n')),(0,i.kt)("p",null,"The output YAML is"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"regex_source: Apple,Google,Baidu,Xiaomi\nregex_split:\n- Apple\n- Google\n- Baidu\n- Xiaomi\nregex_replace: Apple|Google|Baidu|Xiaomi\nregex_compile: true\nregex_search: true\nregex_find_all:\n- a\n- a\n- a\n- a\nregex_result: true\nregex_result_false: false\n")),(0,i.kt)("p",null,"For longer regular expressions, we can also use ",(0,i.kt)("strong",{parentName:"p"},"r-string")," to ignore the escape of ",(0,i.kt)("inlineCode",{parentName:"p"},"\\")," symbols to simplify the writing of regular expression strings."),(0,i.kt)("p",null,"Examples:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'import regex\n\nisIp = regex.match("192.168.0.1", r"^(1\\d{2}|2[0-4]\\d|25[0-5]|[1-9]\\d|[1-9])."+r"(1\\d{2}|2[0-4]\\d|25[0-5]|[1-9]\\d|\\d)."+r"(1\\d{2}|2[0-4]\\d|25[0-5]|[1-9]\\d|\\d)."+r"(1\\d{2}|2[0-4]\\d|25[0-5]|[1-9]\\d|\\d)$")  # Determine if it is an IP string\n')),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'import regex\n\nschema Resource:\n    cpu:         str = "1"\n    memory:      str = "1024Mi"\n    disk:        str = "10Gi"\n    check:\n        regex.match(cpu, r"^([+-]?[0-9.]+)([m]*[-+]?[0-9]*)$"), "cpu must match specific regular expression"\n        regex.match(memory, r"^([1-9][0-9]{0,63})(E|P|T|G|M|K|Ei|Pi|Ti|Gi|Mi|Ki)$"), "memory must match specific regular expression"\n        regex.match(disk, r"^([1-9][0-9]{0,63})(E|P|T|G|M|K|Ei|Pi|Ti|Gi|Mi|Ki)$"), "disk must match specific regular expression"\n')),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'import regex\n\nschema Env:\n    name:            str\n    value?:          str\n    check:\n        len(name) <= 63, "a valid env name must be no more than 63 characters"\n        regex.match(name, r"[A-Za-z_][A-Za-z0-9_]*"), "a valid env name must start with alphabetic character or \'_\', followed by a string of alphanumeric characters or \'_\'"\n')),(0,i.kt)("h2",{id:"16-what-is-the-meaning-of-schema-in-kcl"},"16. What is the meaning of schema in KCL?"),(0,i.kt)("p",null,"Schema is a language element in KCL that defines the type of configuration data. Like struct in C language or class in Java, attributes can be defined in it, and each attribute has a corresponding type."),(0,i.kt)("h2",{id:"17-how-to-use-schema"},"17. How to use schema?"),(0,i.kt)("p",null,"In KCL, we can use the ",(0,i.kt)("inlineCode",{parentName:"p"},"schema")," keyword to define a structure in which we can declare the various attributes of the schema."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"# A Person structure with firstName of attribute string type, lastName of string type, age of integer type.\nschema Person:\n    firstName: str\n    lastName: str\n    # The default value of the age attribute is 0.\n    age: int = 0\n")),(0,i.kt)("p",null,"A complex example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"schema Deployment:\n    name: str\n    cpu: int\n    memory: int\n    image: str\n    service: str\n    replica: int\n    command: [str]\n    labels: {str:str}\n")),(0,i.kt)("p",null,"In the above code, ",(0,i.kt)("inlineCode",{parentName:"p"},"cpu")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"memory")," are defined as integer types; ",(0,i.kt)("inlineCode",{parentName:"p"},"name"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"image")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"service")," are string types; ",(0,i.kt)("inlineCode",{parentName:"p"},"command")," is a list of string types; labels are dictionaries type whose key type and value type are both strings."),(0,i.kt)("h2",{id:"18-how-to-add-optional-and-required-constraints-to-the-schema-attribute"},'18. How to add "optional" and "required" constraints to the schema attribute?'),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"?"),' operator is used in KCL to define an "optional" constraint for a schema, and the schema attribute is "required" by default.'),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"# A Person structure with firstName of attribute string type, lastName of string type, age of integer type.\nschema Person:\n    firstName?: str  # firstName is an optional attribute that can be assigned to None/Undefined\n    lastName?: str  # age is an optional attribute that can be assigned to None/Undefined\n    age: int = 18  # age is an optional attribute that can be assigned to None/Undefined.\n")),(0,i.kt)("h2",{id:"19-how-to-write-validation-rules-for-attributes-in-schema"},"19. How to write validation rules for attributes in schema?"),(0,i.kt)("p",null,"In the schema definition, we can use the ",(0,i.kt)("inlineCode",{parentName:"p"},"check")," keyword to write the validation rules of the schema attribute. As shown below, each line in the check code block corresponds to a conditional expression. When the condition is satisfied, the validation is successful. The conditional expression can be followed by ",(0,i.kt)("inlineCode",{parentName:"p"},', "check error message"')," to indicate the information to be displayed when the validation fails."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'import regex\n\nschema Sample:\n    foo: str  # Required, cannot be None/Undefined, and the type must be str\n    bar: int  # Required, cannot be None/Undefined, and the type must be int\n    fooList: [int]  # Required, cannot be None/Undefined, and the type must be int list\n    color: "Red" | "Yellow" | "Blue"  # Required, literal union type, and must be one of "Red", "Yellow", "Blue".\n    id?: int  # Optional, can be None/Undefined, the type must be int\n\n    check:\n        0 <= bar < 100  # bar must be greater than or equal to 0 and less than 100\n        0 < len(fooList) < 100  # fooList cannot be None/Undefined, and the length must be greater than 0 and less than 100\n        regex.match(foo, "^The.*Foo$")  # regular expression matching\n        bar in range(100)  # bar can only range from 1 to 99\n        bar in [2, 4, 6, 8]  # bar can only take 2, 4, 6, 8\n        bar % 2 == 0  # bar must be a multiple of 2\n        all foo in fooList {\n            foo > 1\n        }  # All elements in fooList must be greater than 1\n        any foo in fooList {\n            foo > 10\n        }  # At least one element in fooList must be greater than 10\n        abs(id) > 10 if id  # check expression with if guard, when id is not empty, the absolute value of id must be greater than 10\n')),(0,i.kt)("p",null,"To sum up, the validation kinds supported in KCL schema are:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Kind"),(0,i.kt)("th",{parentName:"tr",align:null},"Method"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Range"),(0,i.kt)("td",{parentName:"tr",align:null},"Using comparison operators such as ",(0,i.kt)("inlineCode",{parentName:"td"},"<"),", ",(0,i.kt)("inlineCode",{parentName:"td"},">"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Regex"),(0,i.kt)("td",{parentName:"tr",align:null},"Using methods such as ",(0,i.kt)("inlineCode",{parentName:"td"},"match")," from the ",(0,i.kt)("inlineCode",{parentName:"td"},"regex")," system module")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Length"),(0,i.kt)("td",{parentName:"tr",align:null},"Using the ",(0,i.kt)("inlineCode",{parentName:"td"},"len")," built-in function to get the length of a variable of type ",(0,i.kt)("inlineCode",{parentName:"td"},"list/dict/str"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Enum"),(0,i.kt)("td",{parentName:"tr",align:null},"Using literal union types")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Optional/Required"),(0,i.kt)("td",{parentName:"tr",align:null},"Using optional/required attributes of schema")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Condition"),(0,i.kt)("td",{parentName:"tr",align:null},"Using the check if conditional expression")))),(0,i.kt)("h2",{id:"20-how-to-add-documentation-to-schema-and-its-attributes"},"20. How to add documentation to schema and its attributes?"),(0,i.kt)("p",null,"A complete schema document is represented as a triple-quoted string, with the following structure:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'schema Person:\n    """The schema person definition\n\n    Attributes\n    ----------\n    name : str\n        The name of the person\n    age : int\n        The age of the person\n\n    See Also\n    --------\n    Son:\n        Sub-schema Son of the schema Person.\n\n    Examples\n    --------\n    person = Person {\n        name = "Alice"\n        age = 18\n    }\n    """\n    name: str\n    age: int\n\nperson = Person {\n    name = "Alice"\n    age = 18\n}\n')),(0,i.kt)("h2",{id:"21-how-to-write-configuration-based-on-schema-how-to-reuse-the-common-configuration-between-multiple-configurations"},"21. How to write configuration based on schema? How to reuse the common configuration between multiple configurations?"),(0,i.kt)("p",null,"In the process of schema instantiation, we can use the unpacking operator ",(0,i.kt)("inlineCode",{parentName:"p"},"**")," to expand the public configuration"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'schema Boy:\n    name: str\n    age: int\n    hc: int\n\nschema Girl:\n    name: str\n    age: int\n    hc: int\n\nconfig = {\n    age = 18\n    hc = 10\n}\n\nboy = Boy {\n    **config\n    name = "Bob"\n}\ngirl = Girl {\n    **config\n    name = "Alice"\n}\n')),(0,i.kt)("p",null,"The output YAML is"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"config:\n  age: 18\n  hc: 10\nboy:\n  name: Bob\n  age: 18\n  hc: 10\ngirl:\n  name: Alice\n  age: 18\n  hc: 10\n")),(0,i.kt)("h2",{id:"22-how-to-override-the-default-value-of-schema-attribute-when-writing-configuration-based-on-schema"},"22. How to override the default value of schema attribute when writing configuration based on schema?"),(0,i.kt)("p",null,"After defining a schema, we can use the schema name to instantiate the corresponding configuration, use the ",(0,i.kt)("inlineCode",{parentName:"p"},":")," operator to union schema attribute default values, and use ",(0,i.kt)("inlineCode",{parentName:"p"},"=")," to override schema attribute default values."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'schema Meta:\n    labels: {str:str} = {"key1" = "value1"}\n    annotations: {str:str} = {"key1" = "value1"}\n\nmeta = Meta {\n    labels: {"key2": "value2"}\n    annotations = {"key2" = "value2"}\n}\n')),(0,i.kt)("p",null,"The output YAML is"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"meta:\n  labels:\n    key1: value1\n    key2: value2\n  annotations:\n    key2: value2\n")),(0,i.kt)("h2",{id:"23-how-to-reuse-schema-definitions"},"23. How to reuse schema definitions?"),(0,i.kt)("p",null,"We can declare the schema name that the schema needs to inherit at the definition:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'# A person has a first name, a last name and an age.\nschema Person:\n    firstName: str\n    lastName: str\n    # The default value of age is 0\n    age: int = 0\n\n# An employee **is** a person, and has some additional information.\nschema Employee(Person):\n    bankCard: int\n    nationality: str\n\nemployee = Employee {\n    firstName = "Bob"\n    lastName = "Green"\n    age = 18\n    bankCard = 123456\n    nationality = "China"\n}\n')),(0,i.kt)("p",null,"The output YAML is"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"employee:\n  firstName: Bob\n  lastName: Green\n  age: 18\n  bankCard: 123456\n  nationality: China\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Note: KCL only allows schema single inheritance.")),(0,i.kt)("h2",{id:"24-how-to-reuse-schema-logic-through-composition"},"24. How to reuse schema logic through composition?"),(0,i.kt)("p",null,"We can use KCL schema mixin to reuse schema logic. Mixins are generally used for functions such as separation of data in schema internal attributes, and data mapping, which can make KCL code more modular and declarative."),(0,i.kt)("p",null,"Note that it is not recommended to define dependencies for mixing attributes between different mixins, which will make the use of mixins complicated."),(0,i.kt)("p",null,"Examples:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'schema Person:\n    mixin [FullNameMixin, UpperMixin]\n\n    firstName: str\n    lastName: str\n    fullName: str\n    upper: str\n\nschema FullNameMixin:\n    fullName = "{} {}".format(firstName, lastName)\n\nschema UpperMixin:\n    upper = fullName.upper()\n\nperson = Person {\n    firstName = "John"\n    lastName = "Doe"\n}\n')),(0,i.kt)("p",null,"The output YAML is"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"person:\n  firstName: John\n  lastName: Doe\n  fullName: John Doe\n  upper: JOHN DOE\n")),(0,i.kt)("h2",{id:"25-how-to-import-other-kcl-files"},"25. How to import other KCL files?"),(0,i.kt)("p",null,"Other KCL files can be imported via the ",(0,i.kt)("inlineCode",{parentName:"p"},"import")," keyword, and KCL configuration files are organized into modules. A single KCL file is considered a module, and a directory is considered a package, as a special module. The ",(0,i.kt)("inlineCode",{parentName:"p"},"import")," keyword supports both relative path import and absolute path import"),(0,i.kt)("p",null,"For example, for the following directory structure:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},". \n\u2514\u2500\u2500 root\n    \u251c\u2500\u2500 kcl.mod\n    \u251c\u2500\u2500 model\n    \u2502   \u251c\u2500\u2500 model1.k\n    |   \u251c\u2500\u2500 model2.k\n    \u2502   \u2514\u2500\u2500 main.k\n    \u251c\u2500\u2500 service\n    \u2502   \u2502\u2500\u2500 service1.k\n    \u2502   \u2514\u2500\u2500 service2.k\n    \u2514\u2500\u2500 mixin\n        \u2514\u2500\u2500 mixin1.k\n")),(0,i.kt)("p",null,"For ",(0,i.kt)("inlineCode",{parentName:"p"},"main.k"),", relative path import and absolute path import can be expressed as:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"import service  # Absolute path import, the root directory is the path where kcl.mod is located\nimport mixin  # Absolute path import, the root directory is the path where kcl.mod is located\n\nimport .model1  # Relative path import, current directory module\nimport ..service  # Relative path import, parent directory\nimport ...root  # Relative path import, parent directory of parent directory\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Note that for KCL's entry file ",(0,i.kt)("inlineCode",{parentName:"p"},"main.k"),", it cannot import the folder where it is located, otherwise a circular import error will occur:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"import model  # Error: recursively loading\n")),(0,i.kt)("h2",{id:"26-when-can-import-be-omitted"},"26. When can import be omitted?"),(0,i.kt)("p",null,"KCL files in the same folder the not in the main package can refer to each other without importing each other. For example, for the following directory structure:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},". \n\u2514\u2500\u2500 root\n    \u251c\u2500\u2500 kcl.mod\n    \u251c\u2500\u2500 model\n    \u2502   \u251c\u2500\u2500 model1.k\n    |   \u251c\u2500\u2500 model2.k\n    \u2502   \u2514\u2500\u2500 main.k\n    \u251c\u2500\u2500 service\n    \u2502   \u2502\u2500\u2500 service1.k\n    \u2502   \u2514\u2500\u2500 service2.k\n    \u2514\u2500\u2500 mixin\n        \u2514\u2500\u2500 mixin1.k\n")),(0,i.kt)("p",null,"When main.k is used as the KCL command line entry file, the variables in main.k, model1.k and model2.k in the model folder cannot refer to each other and need to be imported through import, but service1.k in the service folder and Variables in service2.k can refer to each other, ignoring import"),(0,i.kt)("p",null,"service1.k"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"schema BaseService:\n    name: str\n    namespace: str\n")),(0,i.kt)("p",null,"service2.k"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"schema Service(BaseService):\n    id: str\n")),(0,i.kt)("h2",{id:"27-there-is-a-line-of-code-that-is-too-long-how-to-wrap-it-gracefully-with-correct-syntax"},"27. There is a line of code that is too long, how to wrap it gracefully with correct syntax?"),(0,i.kt)("p",null,"In KCL, we can use the continuation character ",(0,i.kt)("inlineCode",{parentName:"p"},"\\")," for newlines, and we can also use ",(0,i.kt)("inlineCode",{parentName:"p"},"\\")," in strings to indicate continuation."),(0,i.kt)("p",null,"An example of a long string concatenation continuation line:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'longString = "Too long expression " + \\\n             "Too long expression " + \\\n             "Too long expression "\n')),(0,i.kt)("p",null,"An example of a continuation in the comprehension expression:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"data = [1, 2, 3, 4]\ndataNew = [\n    d + 2 \\\n    for d in data \\\n    if d % 2 == 0\n]\n")),(0,i.kt)("p",null,"An example of a continuation in the if expression:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"condition = 1\ndata1 = 1 \\\n    if condition \\\n    else 2\ndata2 = 2 \\\nif condition \\\nelse 1\n")),(0,i.kt)("p",null,"An example of a continuation in the long string:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'longString = """\\\nThe first line\\\nThe continue second line\\\n"""\n')),(0,i.kt)("p",null,"Note: Use the line continuation character ",(0,i.kt)("inlineCode",{parentName:"p"},"\\")," while maintaining indentation, as follows:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Error use case:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"data1 = [\n    1, 2,\n    3, 4 \\  \n]  # Error, need to keep the indentation of the closing bracket ]\n\ndata2 = [\n    1, 2,\n  3, 4 \n]  # Error, requires uniform indentation of numbers 1 and 3\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Right use case:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"data1 = [\n    1, 2,\n    3, 4\n]  # OK\n\ndata2 = [ \\\n    1, 2, \\\n    3, 4  \\\n]  # OK\n\ndata3 = [ \\\n    1, 2, \\\n  3, 4  \\\n]  # OK\n")),(0,i.kt)("h2",{id:"28-what-do-these-symbols--and--mean"},"28. What do these symbols ",(0,i.kt)("inlineCode",{parentName:"h2"},"**")," and ",(0,i.kt)("inlineCode",{parentName:"h2"},"*")," mean?"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"**"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"*")," appear outside dict/list to represent power operator and multiplication operator respectively.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"data1 = 2 ** 4  # 16\ndata2 = 2 * 3  # 6\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"**"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"*")," appear inside dict/list to indicate unpacking operator, often used for unpacking and merging of list/dict, similar to unpacking operator in Python")),(0,i.kt)("p",null,"Unpacking of dict:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'data = {"key1" = "value1"}\ndataUnpack = {**data, "key2" = "value2"}  # {"key1": "value1", "key2": "value2"}\n')),(0,i.kt)("p",null,"Unpacking of list:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"data = [1, 2, 3]\ndataUnpack = [*data, 4, 5, 6]  # [1, 2, 3, 4, 5, 6]\n")),(0,i.kt)("h2",{id:"29-how-to-get-child-elements-of-listdictschema"},"29. How to get child elements of list/dict/schema"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"For list type, we can use ",(0,i.kt)("inlineCode",{parentName:"li"},"[]")," to get an element in the list")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"data = [1, 2, 3]  # Define an list of integer types\ntheFirstItem = data[0]  # Get the element with index 0 in the list, that is, the first element 1\ntheSecondItem = data[1]  # Get the element with index 1 in the list, which is the first element 2\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Note: The value of the index cannot exceed the length of the list, otherwise an error will occur, we can use the ",(0,i.kt)("inlineCode",{parentName:"p"},"len")," function to get the length of the list.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"data = [1, 2, 3]\ndataLength = len(data)  # List length is 3\nitem = data[3]  # Error: Index out of bounds\n")),(0,i.kt)("p",null,"In addition, we can also use the negative index to get the elements in the list in reverse order."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"data = [1, 2, 3]\nitem1 = data[-1]  # Get the element with index -1 in the list, which is the last element 3\nitem2 = data[-2]  # Get the element with index -2 in the list, which is the second-to-last element 2\n")),(0,i.kt)("p",null,"In summary, the value range of the list index is ",(0,i.kt)("inlineCode",{parentName:"p"},"[-len, len - 1]")),(0,i.kt)("p",null,"When we want to get a part of the sub-elements of the list, we can use the slice expression in ",(0,i.kt)("inlineCode",{parentName:"p"},"[]"),", the specific syntax is ",(0,i.kt)("inlineCode",{parentName:"p"},"[<list start index>:<list end index>:<list traversal step size>]"),", Note that the value range of the start and end of the index is ",(0,i.kt)("inlineCode",{parentName:"p"},"left closed right open [<list start index>, <list end index>)"),", note that the three parameters can be omitted or not written."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"data = [1, 2, 3, 4, 5]\ndataSlice0 = data[1:2]  # Get the set of elements in the list whose index starts at 1 and ends at 2 [2]\ndataSlice1 = data[1:3]  # Get the set of elements in the list whose index starts at 1 and ends at 3 [2, 3]\ndataSlice2 = data[1:]   # Get the set of elements in the list whose index starts at 1 and ends at the last index [2, 3, 4, 5]\ndataSlice3 = data[:3]   # Get the set of elements in the list whose index starts at the first index and ends at 3 [1, 2, 3]\ndataSlice4 = data[::2]  # Get the set of elements in the list whose index starts at the first index and ends at the last index (step size is 2) [1, 3, 5]\ndataSlice5 = data[::-1] # Reverse the list, [5, 4, 3, 2, 1]\ndataSlice6 = data[2:1]  # When the start, stop, step combination of three parameters does not meet the conditions, return an empty list [].\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"For dict/schema types, we can use ",(0,i.kt)("inlineCode",{parentName:"li"},"[]")," and ",(0,i.kt)("inlineCode",{parentName:"li"},".")," to get child elements in dict/schema.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'data = {key1: "value1", key2: "value2"}\ndata1 = data["key1"]  # "value1"\ndata2 = data.key1  # "value1"\ndata3 = data["key2"]  # "value2"\ndata4 = data.key2  # "value2"\n')),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'schema Person:\n    name: str = "Alice"\n    age: int = 18\n\nperson = Person {}\nname1 = person.name  # "Alice"\nname2 = person["name"]  # "Alice"\nage1 = person.age  # 18\nage2 = person.age  # 18\n')),(0,i.kt)("p",null,"When the key value does not exist in the dict, return the value ",(0,i.kt)("inlineCode",{parentName:"p"},"Undefined"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'data = {key1 = "value1", key2 = "value2"}\ndata1 = data["not_exist_key"]  # Undefined\ndata2 = data.not_exist_key  # Undefined\n')),(0,i.kt)("p",null,"We can use the ",(0,i.kt)("inlineCode",{parentName:"p"},"in")," keyword to determine whether a key value exists in dict/schema"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'data = {key1 = "value1", key2 = "value2"}\nexist1 = "key1" in data  # True\nexist2 = "not_exist_key" in data  # False\n')),(0,i.kt)("p",null,"When there is ",(0,i.kt)("inlineCode",{parentName:"p"},".")," in the key value or when we need to get the value corresponding to a key value variable at runtime, we can only use the ",(0,i.kt)("inlineCode",{parentName:"p"},"[]")," method. If there is no special case, use ",(0,i.kt)("inlineCode",{parentName:"p"},"."),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'name = "key1"\ndata = {key1 = "value1", key2 = "value2", "contains.dot" = "value3"}\ndata1 = data[name]  # "value1"\ndata2 = data["contains.dot"]  # "value3"\n# Note that this is wrong: data3 = data.contains.dot\n')),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Note: The above sub-element operators cannot operate on values of non-list/dict/schema collection types, such as integers, nulls, etc.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"data = 1\ndata1 = 1[0]  # Error\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"data = None\ndata1 = None[0]  # Error\n")),(0,i.kt)("p",null,"When getting the child elements of the collection type, it is often necessary to make a non-null or length judgment:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"data = []\nitem = data[0] if data else None\n")),(0,i.kt)("p",null,"We can use the ",(0,i.kt)("inlineCode",{parentName:"p"},"?")," operator to make an if non-null judgment, and return None when the condition is not satisfied. For example, the above code can be simplified to:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'data = []\nitem1 = data?[0]  # When data is empty, return the empty value None\nitem2 = data?[0] or 1  # When data is empty, return the empty value None, if we don\'t want to return None, we can also use the or operator to return other default values e.g., "1" in `data?[0] or 1`\n')),(0,i.kt)("p",null,"Use more ",(0,i.kt)("inlineCode",{parentName:"p"},"?")," operators to avoid complicated and cumbersome non-null judgments"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"data = {key1.key2.key3 = []}\nitem = data?.key1?.key2?.key3?[0]\n")),(0,i.kt)("h2",{id:"30-how-to-get-the-type-of-a-variable-in-kcl-code"},"30. How to get the type of a variable in KCL code"),(0,i.kt)("p",null,"The KCL ",(0,i.kt)("inlineCode",{parentName:"p"},"typeof")," built-in function can return the type (string representation) of a variable immediately for type assertion."),(0,i.kt)("p",null,"Examples:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'import sub as pkg\n\n_a = 1\n\nt1 = typeof(_a)\nt2 = typeof("abc")\n\nschema Person:\n    name?: any\n\n_x1 = Person{}\nt3 = typeof(_x1)\n\n_x2 = pkg.Person{}\nt4 = typeof(_x2)\nt5 = typeof(_x2, full_name=True)\n\nt6 = typeof(_x1, full_name=True)\n\n# Output\n# t1: int\n# t2: str\n# t3: Person\n# t4: Person\n# t5: sub.Person\n# t6: __main__.Person\n')),(0,i.kt)("h2",{id:"31-how-to-solve-the-conflict-between-keywords-and-kcl-variable-names"},"31. How to solve the conflict between keywords and KCL variable names?"),(0,i.kt)("p",null,"For identifier names that conflict with keywords, we can add a ",(0,i.kt)("inlineCode",{parentName:"p"},"$")," prefix before the identifier to define a keyword identifier. For example, in the following code, keywords such as ",(0,i.kt)("inlineCode",{parentName:"p"},"if"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"else")," can be used as identifiers with the ",(0,i.kt)("inlineCode",{parentName:"p"},"$")," prefix and we can get the corresponding YAML output"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'$if = 1\n$else = "s"\n\nschema Data:\n    $filter: str = "filter"\n\ndata = Data {}\n')),(0,i.kt)("p",null,"The output YAML is"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"data:\n  filter: filter\nif: 1\nelse: s\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Note: Prefixing non-keyword identifiers with ",(0,i.kt)("inlineCode",{parentName:"p"},"$")," has the same effect as not adding.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"_a = 1\n$_a = 2  # Equivalent to `_a = 2`\n")),(0,i.kt)("h2",{id:"32-are-built-in-types-of-kcl-a-keyword-of-kcl-whether-they-can-be-used-for-the-definition-of-variables"},"32. Are built-in types of KCL a keyword of KCL? Whether they can be used for the definition of variables"),(0,i.kt)("p",null,"The built-in types of KCL include ",(0,i.kt)("inlineCode",{parentName:"p"},"int"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"float"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"bool")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"str"),", which are not KCL keywords and can be used to define variables, such as the following code:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-py"},"int = 1\nstr = 2\n")),(0,i.kt)("p",null,"The output YAML is"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"int: 1\nstr: 2\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Note: If there are no special requirements, it is not recommended that the names of variables take these built-in types, because in some languages, they exist as keywords.")),(0,i.kt)("h2",{id:"33-how-to-implement-enumeration-in-kcl"},"33. How to implement enumeration in KCL?"),(0,i.kt)("p",null,"There are two ways to implement enumeration in KCL"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Use ",(0,i.kt)("strong",{parentName:"li"},"literal union types")," (recommended)")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'schema Person:\n    name: str\n    gender: "Male" | "Female"\n\nperson = Person {\n    name = "Alice"\n    gender = "Male"  # gender can only be "Male" or "Female"\n}\n')),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'schema Config:\n    colors: ["Red" | "Yellow" | "Blue"]  # colors is an enumerated array\n\nconfig = Config {\n    colors = [\n        "Red"\n        "Blue"\n    ]\n}\n')),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Use schema check expressions")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'schema Person:\n    name: str\n    gender: "Male" | "Female"\n\n    check:\n        gender in ["Male", "Female"]\n\nperson = Person {\n    name = "Alice"\n    gender = "Male"  # gender can only be "Male" or "Female"\n}\n')),(0,i.kt)("h2",{id:"34-how-to-get-the-length-of-dict"},"34. How to get the length of dict"),(0,i.kt)("p",null,"In KCL, we can use the ",(0,i.kt)("inlineCode",{parentName:"p"},"len")," built-in function to directly find the length of a dict"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'len1 = len({k1: "v1"})  # 1\nlen2 = len({k1: "v1", k2: "v2"})  # 2\nvarDict = {k1 = 1, k2 = 2, k3 = 3}\nlen3 = len(varDict)  # 3\n')),(0,i.kt)("p",null,"In addition, the ",(0,i.kt)("inlineCode",{parentName:"p"},"len")," function can also be used to get the length of ",(0,i.kt)("inlineCode",{parentName:"p"},"str")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"list")," types"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'len1 = len("hello")  # 5\nlen2 = len([1, 2, 3])  # 3\n')),(0,i.kt)("h2",{id:"35-how-to-write-conditional-configuration-in-kcl"},"35. How to write conditional configuration in KCL"),(0,i.kt)("p",null,"In KCL, in addition to writing ",(0,i.kt)("inlineCode",{parentName:"p"},"if-elif-else")," conditional expressions in top-level statements, it also supports writing conditional expressions in KCL complex structures (list/dict/schema), and supports conditional configuration writing."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'x = 1\n# Conditional configuration in list\ndataList = [\n    if x == 1: 1\n]\n# Conditional configuration in dict\ndataDict = {\n    if x == 1: key1 = "value1"  # Inline form\n    elif x == 2:\n        key2 = "value2"  # Multi-line form\n}\n\nschema Config:\n    id?: int\n\nenv = "prod"\n# Conditional configuration in schema\ndataSchema = Config {\n    if env == "prod":\n        id = 1\n    elif env == "pre":\n        id = 2\n    elif env == "test":\n        id = 3\n}\n')),(0,i.kt)("h2",{id:"36-does-the--operator-in-kcl-do-deep-comparisons"},"36. Does the == operator in KCL do deep comparisons?"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"==")," operator in KCL"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"For primitive types ",(0,i.kt)("inlineCode",{parentName:"li"},"int"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"float"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"bool"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"str")," variables are directly compared to see if their values are equal"),(0,i.kt)("li",{parentName:"ul"},"Variables of composite types ",(0,i.kt)("inlineCode",{parentName:"li"},"list"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"dict"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"schema")," will deeply recursively compare their sub-elements for equality",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"list")," type deep recursive recursive comparison of the value and length of each index"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"dict"),"/",(0,i.kt)("inlineCode",{parentName:"li"},"schema")," types deeply recursively compare the value of each attribute (regardless of the order in which the attributes appear)")))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"print([1, 2] == [1, 2])  # True\nprint([[0, 1], 1] == [[0, 1], 1])  # True\nprint({k1 = 1, k2 = 2} == {k2 = 2, k1 = 1})  # True\n\nprint([1, 2] == [1, 2, 3])  # False\nprint({k1 = 1, k2 = 2, k3 = 3} == {k2 = 2, k1 = 1})  # False\n")),(0,i.kt)("h2",{id:"37-how-to-modify-existing-configuration-blocks-in-kcl"},"37. How to modify existing configuration blocks in KCL"),(0,i.kt)("p",null,"In KCL, there are three ",(0,i.kt)("strong",{parentName:"p"},"attribute operators")," ",(0,i.kt)("inlineCode",{parentName:"p"},"="),", ",(0,i.kt)("inlineCode",{parentName:"p"},"+="),", ",(0,i.kt)("inlineCode",{parentName:"p"},":"),", which can be used to modify existing configuration blocks, and can use ",(0,i.kt)("strong",{parentName:"p"},"unpacking operator")," ",(0,i.kt)("inlineCode",{parentName:"p"}," **"),' etc. "inherit" all attribute fields and values \u200b\u200bof a configuration block.'),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The ",(0,i.kt)("inlineCode",{parentName:"li"},"=")," attribute operator means overriding, use ",(0,i.kt)("inlineCode",{parentName:"li"},"=")," operator to override/delete the attribute with priority, (if it is overwritten with ",(0,i.kt)("inlineCode",{parentName:"li"},"Undefined"),", it means deletion)"),(0,i.kt)("li",{parentName:"ul"},"The ",(0,i.kt)("inlineCode",{parentName:"li"},"+=")," attribute operator means adding, which is generally used to add sub-elements to the attributes of the list type. The operand type following the ",(0,i.kt)("inlineCode",{parentName:"li"},"+=")," attribute operator can only be of the list type."),(0,i.kt)("li",{parentName:"ul"},"The ",(0,i.kt)("inlineCode",{parentName:"li"},":")," attribute operator means idempotent merge. When the value conflicts, an error is reported, and when there is no conflict, the merge is performed")),(0,i.kt)("h3",{id:"override-attribute-operator-"},"Override attribute operator ="),(0,i.kt)("p",null,"The most commonly used attribute operator is ",(0,i.kt)("inlineCode",{parentName:"p"},"="),", which indicates the assignment of an attribute. When the same attribute is used multiple times, it means overwriting. For global variables outside ",(0,i.kt)("inlineCode",{parentName:"p"},"{}")," or attributes within ",(0,i.kt)("inlineCode",{parentName:"p"},"{}"),", it means using value overrides this global variable or attribute"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'data = { # define a dictionary type variable data\n    a = 1 # use = to declare a attribute a in data with a value of 1\n    b = 2 # use = to declare a attribute b in data with a value of 1\n} # The final data value is {"a": 1, "b": 1}\n')),(0,i.kt)("p",null,"we can also use the override attribute operator at the schema instantiation to achieve the effect of overriding the default value of the schema. Generally, when creating a new schema instance, if there is no special requirement, we can generally use ",(0,i.kt)("inlineCode",{parentName:"p"},"=")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'schema Person:\n    name: str = "Alice" # schema Person\'s name attribute has default value "Alice"\n    age: int = 18 # schema Person\'s age attribute has a default value of 18\n        \nbob = Person {\n    name = "Bob" # "Bob" -> "Alice", the value of the attribute name "Bob" will override the default value "Alice" of the schema Person name attribute\n    age = 10 # 10 -> 18, the value of the attribute age of 10 will override the default value of the schema Person age attribute of 18\n} # The final value of bob is {"name": "Bob", age: 10}\n')),(0,i.kt)("h3",{id:"insert-attribute-operator-"},"Insert attribute operator +="),(0,i.kt)("p",null,"The insert attribute operator means to add the value of an attribute in place, such as adding a new element to a list type attribute"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'data = {\n    args = ["kcl"] # use = to declare an attribute in data with value ["kcl"] args\n    args += ["-Y", "settings.yaml"] # Add two elements "-Y", "settings.yaml" to attribute args using += operator\n} # The final data value is {"args": ["kcl", "-Y", "settings.yaml"]}\n')),(0,i.kt)("h3",{id:"merge-attribute-operators-"},"Merge attribute operators :"),(0,i.kt)("p",null,"The merge attribute operator means idempotent merging of different configuration block values \u200b\u200bof an attribute. When the values \u200b\u200bto be merged conflict, an error is reported. It is mostly used in complex configuration merging scenarios."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'data = {\n    labels: {key1: "value1"} # define a labels, its type is dict, the value is {"key1": "value1"}\n    labels: {key2: "value2"} # Use : to combine different configuration values \u200b\u200bof labels\n} # The final data value is {"labels": {"key1": "value1", "key2": "value2"}}\n')),(0,i.kt)("p",null,"The merge attribute operator is an idempotent operator, and the writing order of the configuration blocks to be merged does not affect the final result. For example, the two ",(0,i.kt)("inlineCode",{parentName:"p"},"labels")," attributes in the above example can also be written in reverse order."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'data = { # The merged writing order of the same attribute labels does not affect the final result\n    labels: {key2: "value2"} # define a label whose type is dict and the value is {"key2": "value2"}\n    labels: {key1: "value1"} # Use : to combine different configuration values \u200b\u200bof labels\n} # The final data value is {"labels": {"key1": "value1", "key2": "value2"}}\n')),(0,i.kt)("p",null,"Note: The merge attribute operator will check the merged values \u200b\u200bfor conflicts, and report an error when the configuration values \u200b\u200bthat need to be merged conflict."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"data = {\n    a: 1 # the value of a is 1\n    a: 2 # Error: The value 2 of a cannot be merged with the value 1 of a because the results conflict and the merge is not commutative\n}\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'data = {\n    labels: {key: "value"}\n    labels: {key: "override_value"} # Error: The values \u200b\u200b"value" and "override_value" of the key attributes of two labels are conflicting and cannot be merged\n}\n')),(0,i.kt)("p",null,"The coalescing operator is used differently for different types"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Attributes of different types cannot be merged"),(0,i.kt)("li",{parentName:"ul"},"When the attribute is a basic type such as int/float/str/bool, the operator will judge whether the values \u200b\u200bto be merged are equal, and a merge conflict error will occur if they are not equal")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"data = {\n    a: 1\n    a: 1 # Ok\n    a: 2 # Error\n}\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"when the attribute is of type list",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Merge conflict error occurs when two lists that need to be merged are not of equal length"),(0,i.kt)("li",{parentName:"ul"},"When the lengths of the two lists to be merged are equal, recursively merge each element in the list according to the index")))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'data = {\n    args: ["kcl"]\n    args: ["-Y", "settings.yaml"] # Error: The lengths of the two args attributes are not the same and cannot be merged\n    env: [{key1: "value1"}]\n    env: [{key2: "value2"}] # Ok: The value of the final env attribute is [{"key1": "value1"}, {"key2": "value2"}]\n}\n')),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"When the attribute is of type dict/schema, recursively merge each element in dict/schema according to key")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'data = {\n    labels: {key1: "value1"}\n    labels: {key2: "value2"}\n    labels: {key3: "value3"}\n} # The final data value is {"labels": {"key1": "value1", "key2": "value2", "key3": "value3"}}\n')),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"the result of combining an attribute of any type with None/Undefined is itself")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'data = {\n    args: ["kcl"]\n    args: None # Ok\n    args: Undefined #Ok\n} # The final data value is {"args": ["kcl"]}\n')),(0,i.kt)("p",null,"Support declaration and merging of top-level variables using the ",(0,i.kt)("inlineCode",{parentName:"p"},":")," attribute (we can still declare a configuration block using ",(0,i.kt)("inlineCode",{parentName:"p"},"config = Config {}"),")"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'schema Config:\n    id: int\n    value: str\n\nconfig: Config {\n    id: 1\n}\nconfig: Config {\n    value: "1"\n}\n"""\nTwo Config configuration blocks are defined here, and the : operator can be used to merge the two configuration blocks together. The equivalent code for the merge is as follows:\nconfig: Config {\n    id: 1\n    value: "1"\n}\n"""\n')),(0,i.kt)("p",null,"To sum up, the usage scenario of the merge attribute operator ",(0,i.kt)("inlineCode",{parentName:"p"},":")," is mainly the merge operation of the complex data structure list/dict/schema. In general, if there is no special requirement, the two attribute operators ",(0,i.kt)("inlineCode",{parentName:"p"},"=")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"+=")," are used. Yes, so the best practice for attribute operators is as follows"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"For primitive types, use the ",(0,i.kt)("inlineCode",{parentName:"li"},"=")," operator"),(0,i.kt)("li",{parentName:"ul"},"For the list type, the ",(0,i.kt)("inlineCode",{parentName:"li"},"=")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"+=")," operators are generally used. Use ",(0,i.kt)("inlineCode",{parentName:"li"},"=")," to completely override the list attribute, and use ",(0,i.kt)("inlineCode",{parentName:"li"},"+=")," to add elements to the list"),(0,i.kt)("li",{parentName:"ul"},"For dict/schema types, the ",(0,i.kt)("inlineCode",{parentName:"li"},":")," operator is generally used")),(0,i.kt)("p",null,"In addition, when a configuration already exists, we can use the unpacking operator ",(0,i.kt)("inlineCode",{parentName:"p"},"**")," to get all field values \u200b\u200bof this configuration and modify the fields with different attribute operators, and get a new configuration"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'configBase = {\n    intKey = 1 # A attribute of type int\n    floatKey = 1.0 # A attribute of type float\n    listKey = [0] # A attribute of type list\n    dictKey = {key1: "value1"} # an attribute of type dict\n}\nconfigNew = {\n    **configBase # Unpack and inline configBase into configNew\n    intKey = 0 # Use override attribute operator = to override intKey attribute to 1\n    floatKey = Undefined # Use override attribute operator = remove floatKey attribute\n    listKey += [1] # Add an attribute 1 to the end of the listKey attribute using the add attribute operator +=\n    dictKey: {key2: "value2"} # Use the merge attribute operator: extend a key-value pair for the dictKey attribute\n}\n')),(0,i.kt)("p",null,"The output YAML result is:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"configBase:\n  intKey: 1\n  floatKey: 1.0\n  listKey:\n  - 0\n  dictKey:\n    key1: value1\nconfigNew:\n  intKey: 0\n  listKey:\n  - 0\n  - 1\n  dictKey:\n    key1: value1\n    key2: value2\n")),(0,i.kt)("p",null,"Alternatively two configuration blocks can be combined using the ",(0,i.kt)("inlineCode",{parentName:"p"},"|")," operator:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'configBase = {\n    intKey = 1 # A attribute of type int\n    floatKey = 1.0 # A attribute of type float\n    listKey = [0] # A attribute of type list\n    dictKey = {key1: "value1"} # an attribute of type dict\n}\nconfigNew = configBase | { # Use | to merge\n    intKey = 0 # Use override attribute operator = to override intKey attribute to 1\n    floatKey = Undefined # Use override attribute operator = remove floatKey attribute\n    listKey += [1] # Add an attribute 1 to the end of the listKey attribute using the add attribute operator +=\n    dictKey: {key2: "value2"} # Use the merge attribute operator: extend a key-value pair for the dictKey attribute\n}\n')),(0,i.kt)("p",null,"The output YAML is"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"configBase:\n  intKey: 1\n  floatKey: 1.0\n  listKey:\n  - 0\n  dictKey:\n    key1: value1\nconfigNew:\n  intKey: 0\n  listKey:\n  - 0\n  - 1\n  dictKey:\n    key1: value1\n    key2: value2\n")),(0,i.kt)("h3",{id:"the-solution-to-the-conflicting-values-on-the-attribute-attr-between-value1-and-value2-error-in-kcl"},"The solution to the conflicting values on the attribute 'attr' between {value1} and {value2} error in KCL"),(0,i.kt)("p",null,"When an error like conflicting values on the attribute 'attr' between {value1} and {value2} occurs in KCL, it is usually a problem with the use of the merge attribute operator ",(0,i.kt)("inlineCode",{parentName:"p"},":"),", indicating that when the ",(0,i.kt)("inlineCode",{parentName:"p"},"value1")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"value2")," configurations are merged, the attribute A conflict error occurred at ",(0,i.kt)("inlineCode",{parentName:"p"},"attr"),". In general, modify the attr attribute of value2 to other attribute operators, use ",(0,i.kt)("inlineCode",{parentName:"p"},"=")," to indicate overwrite, and use ",(0,i.kt)("inlineCode",{parentName:"p"},"+=")," to indicate addition"),(0,i.kt)("p",null,"For example for the following code:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"data = {k: 1} | {k: 2} # Error: conflicting values on the attribute 'k' between {'k': 1} and {'k': 2}\n")),(0,i.kt)("p",null,"We can use the ",(0,i.kt)("inlineCode",{parentName:"p"},"=")," attribute operator to modify it to the following form"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"data = {k: 1} | {k = 2} # Ok: the value 2 will override the value 1 through the `=` operator\n")),(0,i.kt)("h2",{id:"38-how-to-traverse-multiple-elements-at-the-same-time-in-the-for-comprehension"},"38. How to traverse multiple elements at the same time in the for comprehension?"),(0,i.kt)("p",null,"In KCL, we can use for comprehension to traverse multiple elements"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Example 1: two dimension element loop")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"dimension1 = [1, 2, 3]  # The length of the dimension1 list is 3\ndimension2 = [1, 2, 3]  # The length of the dimension2 list is 3\nmatrix = [x + y for x in dimension1 for y in dimension2]  # The length of the matrix list is 9 = 3 * 3\n")),(0,i.kt)("p",null,"The output YAML is:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"dimension1:\n- 1\n- 2\n- 3\ndimension2:\n- 1\n- 2\n- 3\nmatrix:\n- 2\n- 3\n- 4\n- 3\n- 4\n- 5\n- 4\n- 5\n- 6\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Example 2: Use for loop and ",(0,i.kt)("inlineCode",{parentName:"li"},"zip")," built-in function to traverse multiple lists one by one by index")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"dimension1 = [1, 2, 3]  # The length of the dimension1 list is 3\ndimension2 = [1, 2, 3]  # The length of the dimension2 list is 3\ndimension3 = [d[0] + d[1] for d in zip(dimension1, dimension2)]  # The length of the dimension1 list is 3\n")),(0,i.kt)("p",null,"The output YAML is:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"dimension1:\n- 1\n- 2\n- 3\ndimension2:\n- 1\n- 2\n- 3\ndimension3:\n- 2\n- 4\n- 6\n")),(0,i.kt)("h2",{id:"39-how-to-set-default-value-for-option-function-in-kcl"},"39. How to set default value for option function in KCL"),(0,i.kt)("p",null,"In KCL, when the value of the option attribute is None/Undefined or empty, we can use the logical ",(0,i.kt)("inlineCode",{parentName:"p"},"or")," to directly specify a default value."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'value = option("key") or "default_value"  # When the value of key exists, take the value of option("key"), otherwise take "default_value"\n')),(0,i.kt)("p",null,"Or use the default parameter of the option function."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'value = option("key", default="default_value")  # When the value of key exists, take the value of option("key"), otherwise take "default_value"\n')),(0,i.kt)("h2",{id:"40-how-to-check-that-multiple-attributes-cannot-be-empty-or-set-values-at-the-same-time-in-schema-in-kcl"},"40. How to check that multiple attributes cannot be empty or set values at the same time in schema in KCL?"),(0,i.kt)("p",null,"In KCL, a single attribute of schema cannot be empty by default, unless we use the attribute optional operator ",(0,i.kt)("inlineCode",{parentName:"p"},"?"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"schema Person:\n    name: str  # Required.\n    age: int  # Required.\n    id?: int  # Optional.\n")),(0,i.kt)("p",null,"When it is necessary to check that the schema attributes cannot be empty at the same time or only one of them is empty, it needs to be written with the help of schema check expressions. The following takes two attributes ",(0,i.kt)("inlineCode",{parentName:"p"},"a"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"b")," of the schema ",(0,i.kt)("inlineCode",{parentName:"p"},"Config")," as an example to illustrate."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"a")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"b")," attributes cannot be empty at the same time.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"schema Config:\n    a?: str\n    b?: str\n\n    check:\n        a or b\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"a")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"b")," attributes can only have one or both empty (cannot exist at the same time or not empty)")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"schema Config:\n    a?: str\n    b?: str\n\n    check:\n        not a or not b\n")),(0,i.kt)("h2",{id:"41-a-file-is-imported-in-kcl-but-the-schema-defined-by-other-kcl-files-in-the-same-directory-cannot-be-found-what-might-be-the-reason"},"41. A file is imported in KCL, but the schema defined by other KCL files in the same directory cannot be found. What might be the reason?"),(0,i.kt)("p",null,"It may be caused to import only this file in this folder. In KCL, import statement supports importing the entire folder, and also supports importing a certain KCL file under a certain folder. For the following directory structure."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},".\n\u251c\u2500\u2500 kcl.mod\n\u251c\u2500\u2500 main.k\n\u2514\u2500\u2500 pkg\n    \u251c\u2500\u2500 pkg1.k\n    \u251c\u2500\u2500 pkg2.k\n    \u2514\u2500\u2500 pkg3.k\n")),(0,i.kt)("p",null,"There is an entry file main.k in the root directory. You can write the following code in main.k to import the entire pkg folder. At this time, all schema definitions in the pkg folder are visible to each other."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"import pkg\n")),(0,i.kt)("p",null,"We can also write the following code to import a single file pkg/pkg1.k. At this time, pkg1.k cannot find other files, namely the schema definitions under pkg2.k/pkg3.k"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"import pkg.pkg1\n")),(0,i.kt)("h2",{id:"42-how-is-indentation-handled-in-kcl"},"42. How is indentation handled in KCL?"),(0,i.kt)("p",null,"In KCL, when a colon ",(0,i.kt)("inlineCode",{parentName:"p"},":"),", square bracket pair ",(0,i.kt)("inlineCode",{parentName:"p"},"[]")," and curly bracket pair ",(0,i.kt)("inlineCode",{parentName:"p"},"{}")," appear, we generally need to use newline + indentation, and the number of indented spaces for the same indentation level needs to be consistent. The indentation level is generally represented by 4 spaces."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"colon ",(0,i.kt)("inlineCode",{parentName:"li"},":")," followed by newline and indent")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'"""Indentation in if statements"""\n_a = 1\n_b = 1\nif _a >= 1:  # colon `:` followed by newline and indent\n    if _a > 8:\n        _b = 2\n    elif a > 6:\n        _b = 3\n\n"""Indentation in schema statements"""\nschema Person:  # colon `:` followed by newline and indent\n    name: str\n    age: int\n')),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"opening bracket ",(0,i.kt)("inlineCode",{parentName:"li"},"[")," followed by newline and indent")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"data = [  # opening bracket `[` followed by newline and indent\n    1\n    2\n    3\n]  # unindent before closing bracket ]\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"data = [  # opening bracket `[` followed by newline and indent\n    i * 2 for i in range(5)\n]  # unindent before closing bracket `]`\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"opening bracket ",(0,i.kt)("inlineCode",{parentName:"li"},"{")," followed by newline and indent")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'data = {  # opening bracket `{` followed by newline and indent\n    k1 = "v1"\n    k2 = "v2"\n} # unindent before closing brace `}`\n')),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"data = {  # opening bracket `{` followed by newline and indent\n    str(i): i * 2 for i in range(5)\n}  # unindent before closing brace `}`\n")),(0,i.kt)("h2",{id:"43-how-to-write-simple-tests-for-kcl-code"},"43. How to write simple tests for KCL code?"),(0,i.kt)("p",null,"The current version of KCL does not support internal program debugging, we can use the assert statement and the print function to achieve data assertion and viewing."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'a = 1\nprint("The value of a is", a)\nassert a == 1\n')),(0,i.kt)("p",null,"In addition, we can also use the kcl-test test tool to write KCL internal test cases"),(0,i.kt)("p",null,"Assuming there is a hello.k file, the code is as follows:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'schema Person:\n    name: str = "kcl"\n    age: int = 1\n\nhello = Person {\n    name = "hello kcl"\n    age = 102\n}\n')),(0,i.kt)("p",null,"Construct the hello_test.k test file with the following contents:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"schema TestPerson:\n    a = Person{}\n    assert a.name == 'kcl'\n\nschema TestPerson_age:\n    a = Person{}\n    assert a.age == 1\n\nschema TestPerson_ok:\n    a = Person{}\n    assert a.name == \"kcl\"\n    assert a.age == 1\n")),(0,i.kt)("p",null,"Then execute the kcl-test command in the directory:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"$ kcl-test\nok   /pkg/to/app [365.154142ms]\n$\n")),(0,i.kt)("h2",{id:"44-how-to-define-and-use-functions-in-kcl"},"44. How to define and use functions in KCL?"),(0,i.kt)("p",null,"The schema structure acts as a function to a certain extent, and this function has the ability to have multiple input parameters and multiple output parameters. For example, the following code can implement the function of a Fibonacci sequence:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"schema Fib:\n    n: int\n    value: int = 1 if n <= 2 else (Fib {n: n - 1}).value + (Fib {n: n - 2}).value\n\nfib8 = (Fib {n: 8}).value\n")),(0,i.kt)("p",null,"The output is"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"fib8: 21\n")),(0,i.kt)("p",null,"A schema function that merges lists into dictionaries"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'schema UnionAll[data, n]:\n    _?: [] = data\n    value?: {:} = ((UnionAll(data=data, n=n - 1) {}).value | data[n] if n > 0 else data[0]) if data else {}\n\nschema MergeList[data]:\n    """Union all elements in a list returns the merged dictionary\n\n    [{"key1": "value1"}, {"key2": "value2"}, {"key3": "value3"}] -> {"key1": "value1", "key2": "value2", "key3": "value3"}\n    """\n    _?: [] = data\n    value?: {:} = (UnionAll(data=data, n=len(data) - 1) {}).value if data else {}\n')),(0,i.kt)("p",null,"In addition, KCL supports defining a function using the ",(0,i.kt)("inlineCode",{parentName:"p"},"lambda")," keyword:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"func = lambda x: int, y: int -> int {\n    x + y\n}\na = func(1, 1)  # 2\n")),(0,i.kt)("p",null,"A lambda function has the following properties:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"A lambda function takes the value of the last expression as the return value of the function, and an empty function body returns None."),(0,i.kt)("li",{parentName:"ul"},"The return value type annotation can be omitted, the return value type is the type of the last expression value."),(0,i.kt)("li",{parentName:"ul"},"There are no order-independent features in the function body, all expressions are executed in order.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"_func = lambda x: int, y: int -> int {\n    x + y\n}  # Define a function using the lambda expression\n_func = lambda x: int, y: int -> int {\n    x - y\n}  # Ok\n_func = lambda x: int, y: int -> str {\n    str(x + y)\n}  # Error (int, int) -> str can't be assigned to (int, int) -> int\n")),(0,i.kt)("p",null,"A lambda function cannot participate in any computation and can only be used in assignment and call statements."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"func = lambda x: int, y: int -> int {\n    x + y\n}\nx = func + 1  # Error: unsupported operand type(s) for +: 'function' and 'int(1)'\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"a = 1\nfunc = lambda x: int {\n    x + a\n}\nfuncOther = lambda f, para: int {\n    f(para)\n}\nr = funcOther(func, 1)  # 2\n")),(0,i.kt)("p",null,"The output is"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"a: 1\nr: 2\n")),(0,i.kt)("p",null,"We can define an anonymous function and call it directly"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"result = (lambda x, y {\n    z = 2 * x\n    z + y\n})(1, 1)  # 3\n")),(0,i.kt)("p",null,"Anonymous functions can be also used in for loops"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"result = [(lambda x, y {\n    x + y\n})(x, y) for x in [1, 2] for y in [1, 2]]  # [2, 3, 3, 4]\n")),(0,i.kt)("p",null,"Functions can be defined and used in the KCL schema"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"_funcOutOfSchema = lambda x: int, y: int {\n    x + y\n}\nschema Data:\n    _funcInSchema = lambda x: int, y: int {\n        x + y\n    }\n    id0: int = _funcOutOfSchema(1, 1)\n    id1: int = _funcInSchema(1, 1)\n    id2: int = (lambda x: int, y: int {\n        x + y\n    })(1, 1)\n")),(0,i.kt)("p",null,"The output YAML is"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"data:\n  id0: 2\n  id1: 2\n  id2: 2\n")),(0,i.kt)("h2",{id:"45-why-do-we-get-an-error-when-a-variable-is-assigned-an-enumeration-type-a-literal-union-type"},"45. Why do we get an error when a variable is assigned an enumeration type (a literal union type)?"),(0,i.kt)("p",null,"In KCL, a attribute defined as a literal union type is only allowed to receive a literal value or a variable of the same literal union type during assignment. For example, the following code is correct:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'schema Data:\n    color: "Red" | "Yellow" | "Blue"\n\ndata = Data {\n    color = "Red"  # Ok, can be assigned as "Red", "Yellow" and "Blue"\n} \n')),(0,i.kt)("p",null,"However the following code is wrong:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'schema Data:\n    color: "Red" | "Yellow" | "Blue"\n\n_color = "Red"\n\ndata = Data {\n    color = _color  # Error: expect str(Red)|str(Yellow)|str(Blue), got str\n} \n')),(0,i.kt)("p",null,"This is because there is no type declared for the variable ",(0,i.kt)("inlineCode",{parentName:"p"},"_color"),", it will be deduced by the KCL compiler as a ",(0,i.kt)("inlineCode",{parentName:"p"},"str"),' string type, so when a "larger" type ',(0,i.kt)("inlineCode",{parentName:"p"},"str"),' is assigned to a "smaller" type ',(0,i.kt)("inlineCode",{parentName:"p"},'"Red" | "Yellow" | "Blue"')," will report an error, one solution is to declare a type for the ",(0,i.kt)("inlineCode",{parentName:"p"},"_color")," variable, the following code is correct:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'schema Data:\n    color: "Red" | "Yellow" | "Blue"\n\n_color: "Red" | "Yellow" | "Blue" = "Red"\n\ndata = Data {\n    color = _color  # Ok\n}\n')),(0,i.kt)("p",null,"Further, we can use type aliases to simplify enumeration (writing of literal union types), such as the following code:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'type Color = "Red" | "Yellow" | "Blue"  # Define a type alias, which can be reused in different places, reducing the amount of code writing\n\nschema Data:\n    color: Color\n\n_color: Color = "Red"\n\ndata = Data {\n    color = _color  # Ok\n}\n')),(0,i.kt)("h2",{id:"46-procedural-for-loop"},"46. Procedural for loop"),(0,i.kt)("p",null,"KCL provides comprehensions and all/any/map/filter expressions for processing a collection element, which meets most needs, and provides a procedural for loop body. Providing a procedural for loop body is not very demanding from the current scenario, so there is no procedural for loop support yet."),(0,i.kt)("p",null,'In addition, although KCL does not support procedural for loops, it is possible to "construct" corresponding procedural for loops through for loops and lambda functions.'),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"result = [(lambda x: int, y: int -> int {\n    # Write procedural for loop logic in the lambda function.\n    z = x + y\n    x * 2\n})(x, y) for x in [1, 2] for y in [1, 2]]  # [2, 2, 4, 4]\n")),(0,i.kt)("h2",{id:"47-default-variables-are-immutable"},"47. Default variables are immutable"),(0,i.kt)("p",null,"The immutability of KCL variables means that the exported variables starting with non-underscore ",(0,i.kt)("inlineCode",{parentName:"p"},"_")," in the KCL top-level structure cannot be changed after initialization."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'schema Person:\n    name: str\n    age: int\n\na = 1  # a will be output to YAML, once assigned it cannot be modified\n_b = 1  # _b The variable is named with an underscore and will not be output to YAML. It can be modified by multiple assignments\n_b = 2\nalice = Person {\n    name = "Alice"\n    age = 18\n}\n')),(0,i.kt)("p",null,"There are two ways of specifying that variables are immutable:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"non-underscore top-level variables outside the schema")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"a = 1 # immutable exported variable\n_b = 2 # mutable non-export variable\n")),(0,i.kt)("h2",{id:"48-is-there-a-type-like-go-interfaceany-or-java-object-in-kcl"},"48. Is there a type like Go ",(0,i.kt)("inlineCode",{parentName:"h2"},"interface{}"),"/",(0,i.kt)("inlineCode",{parentName:"h2"},"any")," or Java ",(0,i.kt)("inlineCode",{parentName:"h2"},"Object")," in KCL?"),(0,i.kt)("p",null,"In KCL, we can use the ",(0,i.kt)("inlineCode",{parentName:"p"},"any")," type annotation to define a variable to store any values such as integers, strings and schemas. For example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'schema Data:\n    id: int = 1\n\nvar_list: [any] = [1, "12", Data {}]\n')),(0,i.kt)("p",null,"The output YAML is"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"var_list:\n- 1\n- '12'\n- id: 1\n")),(0,i.kt)("p",null,"In addition, we can also use the ",(0,i.kt)("inlineCode",{parentName:"p"},"typeof")," function to determine the type of variables during KCL code execution:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'schema Data1:\n    id: int = 1\n\nschema Data2:\n    name: str = "name"\n\ndata_list: [any] = [Data1 {}, Data2 {}]\ndata_type_list: [str] = [typeof(data) for data in data_list]\n')),(0,i.kt)("p",null,"The output YAML is"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"data_list:\n- id: 1\n- name: name\ndata_type_list:\n- Data1\n- Data2\n")),(0,i.kt)("h2",{id:"49-how-to-develop-a-kcl-plugin"},"49. How to develop a KCL plugin?"),(0,i.kt)("p",null,"KCL plugins are installed in the plugins subdirectory of KCL (usually installed in the ",(0,i.kt)("inlineCode",{parentName:"p"},"$HOME/.kcl/plugins")," directory), or set through the ",(0,i.kt)("inlineCode",{parentName:"p"},"$KCL_PLUGINS_ROOT")," environment variable. Besides, the ",(0,i.kt)("inlineCode",{parentName:"p"},"plugins")," directory could also be placed at the ",(0,i.kt)("inlineCode",{parentName:"p"},"pwd")," path. For plugin developers, plugins are managed in the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/kcl-lang/kcl-plugin"},"Git repository"),", and the plugin repository can be cloned to this directory for development."),(0,i.kt)("p",null,"KCL has built-in kcl-plugin scaffolding command to assist users to write KCL plug-ins in Python language, so that the corresponding plug-ins can be called in the KCL file to enhance the KCL language itself, such as accessing the network, reading and writing IO, CMDB query and encryption and decryption functions."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"usage: kcl-plugin [-h] {list,init,info,gendoc,test} ...\n\npositional arguments:\n  {list,init,info,gendoc,test}\n                        kcl plugin sub commands\n    list list all plugins\n    init init a new plugin\n    info show plugin document\n    gendoc gen all plugins document\n    test test plugin\n\noptional arguments:\n  -h, --help show this help message and exit\n")),(0,i.kt)("p",null,"For example, if you want to develop a plugin named io, you can use the following command to successfully create a new io plugin"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"kcl-plugin init io\n")),(0,i.kt)("p",null,"Then you can use the following command to get the root path of the plugin and cd to the corresponding io plugin directory for development"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"kcl-plugin info\n")),(0,i.kt)("p",null,"For example, if you want to develop a function read_file to read a file, you can write python code in ",(0,i.kt)("inlineCode",{parentName:"p"},"plugin.py")," of ",(0,i.kt)("inlineCode",{parentName:"p"},"$plugin_root/io"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"# Copyright 2020 The KCL Authors. All rights reserved.\n\nimport pathlib\n\nINFO = {\n    'name': 'io',\n    'describe': 'my io plugin description test',\n    'long_describe': 'my io plugin long description test',\n    'version': '0.0.1',\n}\n\n\ndef read_file(file: str) -> str:\n    \"\"\"Read string from file\"\"\"\n    return pathlib.Path(file).read_text()\n\n")),(0,i.kt)("p",null,"In addition, you can write the corresponding test function in ",(0,i.kt)("inlineCode",{parentName:"p"},"plugin_test.py"),", or you can directly write the following KCL file for testing:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"import kcl_plugin.io\n\ntext = io.read_file('test.txt')\n")),(0,i.kt)("p",null,"You can also use the info command to view information about the io plugin"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"kcl-plugin info io\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'{\n    "name": "io",\n    "describe": "my io plugin description test",\n    "long_describe": "my io plugin long description test",\n    "version": "0.0.1",\n    "method": {\n        "read_file": "Read string from file"\n    }\n}\n')),(0,i.kt)("p",null,"Finally, the plugin that has written the test can be merged with MR in the ",(0,i.kt)("inlineCode",{parentName:"p"},"kcl_plugins")," repository."),(0,i.kt)("h2",{id:"50-how-to-do-basic-type-conversion-in-kcl"},"50. How to do basic type conversion in KCL"),(0,i.kt)("p",null,"You can use the ",(0,i.kt)("inlineCode",{parentName:"p"},"int()"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"float()")," function and ",(0,i.kt)("inlineCode",{parentName:"p"},"str()")," function to convert the basic types between ",(0,i.kt)("inlineCode",{parentName:"p"},"int"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"float")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"str"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'_t = 1\n\nt_str: str = str(_t)           # you will get "t_str: \'1\'"\nt_int: int = int(t_str)        # you will get "t_int: 1"\nt_float: float = float(t_str)  # you will get "t_float: 1.0"\n')),(0,i.kt)("p",null,"For more information about type conversion, see ",(0,i.kt)("a",{parentName:"p",href:"https://kcl-lang.io/docs/reference/lang/tour#built-in-types"},"KCL Builtin Types")," and ",(0,i.kt)("a",{parentName:"p",href:"https://kcl-lang.io/docs/reference/lang/tour#type-system"},"KCL Type System"),"."))}c.isMDXComponent=!0}}]);